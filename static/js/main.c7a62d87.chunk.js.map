{"version":3,"sources":["Utils/firebase.js","context/PyroStateContext.js","context/PyroDispatchContext.js","reducers/PyroReducer.js","assets/images/pyro_white.svg","hooks/useAuth.js","components/Loading/index.js","components/SignIn.js","components/Login/index.js","components/SignOut.js","components/UserNotAllowed/index.js","components/User/index.js","components/Pile/index.js","Utils/RenderedColor.js","components/InputDimensions/index.js","assets/images/mobile.svg","assets/images/tablet.svg","assets/images/desktop.svg","components/Dimensions/index.js","components/ProtoActions/index.js","components/Empty/index.js","Utils/ReturnVisibility.js","components/Gradients/index.js","components/SolidBG/index.js","components/ImageBG/index.js","components/Background/index.js","components/StrokeGradients/index.js","components/StrokeSolidBG/index.js","components/Stroke/index.js","components/Vector/index.js","components/Text/index.js","components/Field/index.js","components/Ellipse/index.js","components/Element/index.js","components/RenderElements/index.js","components/Frame/index.js","components/Frames/index.js","components/Prototype/index.js","components/NoPyro/index.js","App.js","components/InitFigma/index.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","firestore","PyroStateContext","createContext","PyroDispatchContext","initialPyroState","figmaFile","authData","loading","isMobile","figmaData","currentFrameIDX","currentFrameID","currentPageIDX","currentPageID","protoWidth","protoHeight","tabletWidth","tabletHeight","minWidth","minHeight","smoov","onBoarding","fileImages","nodeTree","selection","vectors","me","breakPoints","currentBreakpoint","direction","email","rotations","pluginState","pluginStateChanges","hoverEnter","firstFrame","updateVis","noPyroProto","userIsAllowed","pristine","userData","requestSent","token","PyroReducer","state","action","type","HIDE_REQUEST","SHOW_REQUEST","AUTHORISE_USER","payload","SET_USER","NOT_PRISTINE","NO_PROTO","SET_FILEKEY","UPDATE_FIELD_VALUE","pluginVariables","variable","val","UPDATE_PLUGIN_STATE","update_current","String","pluginAction","targetVariable","id","update_target","targetValue","eventType","indexOf","actionType","ADD_CONDITION","newCondition","nodeID","conditions","pluginConditions","SET_PLUGIN_STATE","SET_DIRECTION","SET_CURRENT_BPOINT","SET_BREAKPOINTS","SET_SELECTION","currentPage","SET_ROTATES","SET_VECTORS","SET_EMAIL","SET_ONBARDING","SET_ATTRIBUTE","hasOwnProperty","attribute","value","ADD_CHILD_ELEMENT","startNodeTree","GET_ME","GET_IMAGES","REMOVE_SMOOV","SET_TABLET","SET_DESKTOP","window","innerWidth","innerHeight","SET_MOBILE","SET_WIDTH","SET_HEIGHT","SET_CURRENT_FRAME_ID","SET_CURRENT_FRAME_IDX","undefined","RESET_CURRENTPAGE","SET_CURRENT_PAGE_IDX","RMV_LOADING","LOADING","TOKEN","UPDATE_FILE_DATA_FROM_FIGMA","pageData","Error","useAuth","useState","user","setUser","useEffect","onAuthStateChanged","Loading","className","SignIn","onClick","provider","GoogleAuthProvider","signInWithPopup","Login","showUp","setShowUp","unSub","setTimeout","clearTimeout","SignOut","css","signOut","UserNotAllowed","dispatch","useContext","displayName","console","log","User","photoURL","src","width","alt","Pile","msg","floatToRGB","channel","RenderedColor","color","r","g","b","a","alpha","InputDimensions","setInputDimensions","e","isWidth","isNaN","Number","target","checkMax","disabled","onFocus","select","onChange","onBlur","Math","round","Dimensions","setDimensions","dimensions","size","mobile","desktop","tablet","ProtoActions","pyro","height","name","children","Empty","ReturnVisibility","condition","isC2","condition2","toLowerCase","nbC1","condition1","nbC2","c1","thisString","operator","show","Gradients","bg","gradType","canvasRef","useRef","opacity","blendMode","gradientStops","gradientTransform","startGradient","start","endGradient","end","c","current","getContext","clearRect","grad","x0","x","y0","y","x1","y1","gradientWith","sqrt","createLinearGradient","createRadialGradient","forEach","stop","idx","position","addColorStop","fillStyle","fillRect","style","mixBlendMode","split","join","ref","SolidBG","background","ImageBG","constraints","bgBlend","scaleMode","backgroundImage","imageRef","horizontal","Background","element","makeBackground","key","visible","length","map","fills","StrokeGradients","str","strokeWeight","gradientHandlePositions","strokeStyle","lineWidth","strokeRect","StrokeSolidBG","borderRadius","rectangleCornerRadius","reduce","acc","itm","cornerRadius","border","Stroke","strokes","makeStroke","Vector","handleClick","node","transitionNodeID","vectorPaths","vectorStyle","setVectorStyle","SVGStyle","setSVGStyle","pathStyle","setPathStyle","tempStyle","tempSVG","path","stroke","strokeWidth","xmlns","viewBox","strokeLinecap","d","Text","posStyle","characters","textAlignHorizontal","textAlignVertical","textAutoResize","textCase","textDecoration","fontName","fontSize","layoutAlign","layoutGrow","letterSpacing","lineHeight","listSpacing","textStyles","setTextStyles","txtStyles","textAlign","textTransform","fontStyle","fontFamily","family","justif","align","display","margin","justifyContent","alignItems","pluginTexts","temp","showMe","Object","keys","every","sumStyles","varID","Field","pluginFields","placeHolder","placeholder","Ellipse","Element","renderThis","parent","currentFrame","effects","absoluteBoundingBox","layoutMode","reactions","setParentNode","nodeStyle","setNodeStyle","flexChild","setFlexChild","clickable","makeClickable","classNames","setClassNames","flexParent","setAxis","priority","axis","setVisibility","centerStyle","isParent","centerParent","childStyle","left","right","calcChildWidth","xRight","top","bottom","handleEvent","pluginActions","destinationId","classes","setNode","actions","radius","overflow","setRadius","primaryAxisAlignItems","counterAxisAlignItems","flexDirection","paddingTop","paddingRight","paddingBottom","paddingLeft","padding","boxSizing","setFlex","toFixed","vertical","setDimension","fx","fxType","offset","boxShadow","parentNodee","itemSpacing","parentChildren","order","flexDirectionIsHorizontal","flex","setChild","parentPos","parentNode","setPosition","isVisible","onMouseEnter","onMouseLeave","sort","sortChildren","child","RenderElements","Frame","Frames","currentId","pages","frame","index","maxConstraints","minConstraints","onResize","Prototype","rwd","setBG","page","i","w","breakPoint","filter","setPoints","childKey","currFrame","backgroundColor","NoPyro","App","fileDB","collection","doc","pluginVariablesDB","pluginActionsDB","pluginConditionsDB","pluginFieldsDB","pluginTextsDB","useCollectionData","idField","pluginVariablesState","entries","var","pluginFieldsState","pluginTextsState","pluginActionsState","get","then","snap","data","pluginConditionsState","InitFigma","fileKey","location","href","useReducer","db","updateUser","authorizeUser","isAuthorised","currentOrg","myEmail","useOrg","orgDomain","users","imTheOwner","isMyGuest","exists","prototypeStartNodeID","catch","error","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c7a62d87.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\nimport 'firebase/firestore'\r\nimport 'firebase/auth'\r\n\r\nconst FireBaseInit = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: \"pyro-intuit.firebaseapp.com\",\r\n  databaseURL: \"https://pyro-intuit.firebaseio.com\",\r\n  projectId: \"pyro-intuit\",\r\n  storageBucket: \"pyro-intuit.appspot.com\",\r\n  messagingSenderId: \"657829873421\",\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID\r\n}\r\n\r\n\r\nfirebase.initializeApp(FireBaseInit)\r\nconst auth = firebase.auth()\r\nconst firestore = firebase.firestore()\r\nexport { firestore,auth }\r\n\r\nexport default firebase\r\n","import { createContext } from 'react'\r\nconst PyroStateContext = createContext()\r\nexport default PyroStateContext\r\n","import { createContext } from 'react'\r\nconst PyroDispatchContext = createContext()\r\nexport default PyroDispatchContext\r\n","let initialPyroState = {\r\n  //figmaFile:\"91MpGRzYJyF8ZruHDpUC6r\",\r\n  //figmaFile:\"cZk5K4u4XGN22bNIsEcojq\",\r\n  figmaFile:null,\r\n  authData:null,\r\n  loading:true,\r\n  isMobile:true,\r\n  figmaData:null,\r\n  currentFrameIDX:0,\r\n  currentFrameID:null,\r\n  currentPageIDX:0,\r\n  currentPageID:null,\r\n  protoWidth:375,\r\n  protoHeight:812,\r\n  tabletWidth:1024,\r\n  tabletHeight:728,\r\n  minWidth:324,\r\n  minHeight:394,\r\n  smoov:false,\r\n  onBoarding:0,\r\n  fileImages:null,\r\n  nodeTree:null,\r\n  selection:null,\r\n  vectors:null,\r\n  me:null,\r\n  breakPoints:null,\r\n  currentBreakpoint:0,\r\n  direction:false,\r\n  email:null,\r\n  rotations:null,\r\n  pluginState:null,\r\n  pluginStateChanges:false,\r\n  hoverEnter:null,\r\n  firstFrame:null,\r\n  updateVis:false,\r\n  noPyroProto:false,\r\n  userIsAllowed:false,\r\n  pristine:true,\r\n  userData:null,\r\n  requestSent:false,\r\n  token:null\r\n}\r\nconst PyroReducer = (state, action) => {\r\n  switch (action.type) {\r\n\r\n    case 'HIDE_REQUEST':\r\n      let HIDE_REQUEST = {...state}\r\n      HIDE_REQUEST.requestSent = false\r\n    return HIDE_REQUEST;\r\n\r\n    case 'SHOW_REQUEST':\r\n      let SHOW_REQUEST = {...state}\r\n      SHOW_REQUEST.requestSent = true\r\n    return SHOW_REQUEST;\r\n\r\n    case 'AUTHORISE_USER':\r\n      let AUTHORISE_USER = {...state}\r\n      AUTHORISE_USER.userIsAllowed = action.payload\r\n    return AUTHORISE_USER;\r\n\r\n    case 'SET_USER':\r\n      let SET_USER = {...state}\r\n      SET_USER.userData = action.payload\r\n    return SET_USER;\r\n\r\n    case 'NOT_PRISTINE':\r\n      let NOT_PRISTINE = {...state}\r\n      NOT_PRISTINE.pristine = false\r\n    return NOT_PRISTINE;\r\n\r\n    case 'NO_PROTO':\r\n      let NO_PROTO = {...state}\r\n      NO_PROTO.noPyroProto = true\r\n    return NO_PROTO;\r\n\r\n    case 'SET_FILEKEY':\r\n      let SET_FILEKEY = {...state}\r\n      SET_FILEKEY.figmaFile= action.payload\r\n    return SET_FILEKEY;\r\n\r\n    case 'UPDATE_FIELD_VALUE':\r\n      let UPDATE_FIELD_VALUE = {...state}\r\n      UPDATE_FIELD_VALUE.pluginState.pluginVariables[action.payload.variable] = action.payload.val\r\n      UPDATE_FIELD_VALUE.updateVis = !UPDATE_FIELD_VALUE.updateVis\r\n    return UPDATE_FIELD_VALUE;\r\n\r\n    case 'UPDATE_PLUGIN_STATE':\r\n      let UPDATE_PLUGIN_STATE = {...state}\r\n      const update_current = String(UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id])\r\n      const update_target = action.payload.pluginAction.targetVariable.targetValue\r\n      if(action.payload.eventType.indexOf('MouseEnter') !== -1) UPDATE_PLUGIN_STATE.hoverEnter = update_current\r\n\r\n      let originalVal =  UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id]\r\n      if (action.payload.pluginAction.actionType === 'becomes'&&(update_current!==update_target)) {\r\n        UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id] = action.payload.pluginAction.targetVariable.targetValue\r\n      }\r\n\r\n      if (action.payload.pluginAction.actionType === 'toggles') {\r\n        if(String(UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id])==='true'||\r\n          String(UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id])==='false'){\r\n            UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id] = !UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id]\r\n          }\r\n      }\r\n\r\n\r\n      if(action.payload.eventType.indexOf('MouseLeave') !== -1){\r\n        UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id] = UPDATE_PLUGIN_STATE.hoverEnter\r\n        UPDATE_PLUGIN_STATE.hoverEnter = null\r\n      }\r\n\r\n      UPDATE_PLUGIN_STATE.updateVis = !UPDATE_PLUGIN_STATE.updateVis\r\n    return UPDATE_PLUGIN_STATE;\r\n\r\n    case 'ADD_CONDITION':\r\n      let ADD_CONDITION = {...state}\r\n      if(ADD_CONDITION.pluginState === null) {\r\n        let newCondition = {}\r\n        newCondition['pluginConditions'][action.payload.nodeID] = action.payload.conditions\r\n        ADD_CONDITION.pluginState = newCondition\r\n      } else ADD_CONDITION.pluginState.pluginConditions[action.payload.nodeID] = action.payload.conditions\r\n      ADD_CONDITION.pluginStateChanges = !ADD_CONDITION.pluginStateChanges\r\n      ADD_CONDITION.loading = false\r\n    return ADD_CONDITION;\r\n\r\n    case 'SET_PLUGIN_STATE':\r\n      let SET_PLUGIN_STATE = {...state}\r\n      SET_PLUGIN_STATE.pluginStateChanges = !SET_PLUGIN_STATE.pluginStateChanges\r\n      SET_PLUGIN_STATE.pluginState = action.payload\r\n    return SET_PLUGIN_STATE;\r\n\r\n    case 'SET_DIRECTION':\r\n      let SET_DIRECTION = {...state}\r\n      SET_DIRECTION.direction = action.payload\r\n    return SET_DIRECTION;\r\n\r\n    case 'SET_CURRENT_BPOINT':\r\n      let SET_CURRENT_BPOINT = {...state}\r\n      SET_CURRENT_BPOINT.currentBreakpoint = action.payload\r\n    return SET_CURRENT_BPOINT;\r\n\r\n    case 'SET_BREAKPOINTS':\r\n      let SET_BREAKPOINTS = {...state}\r\n      SET_BREAKPOINTS.breakPoints = action.payload\r\n    return SET_BREAKPOINTS;\r\n\r\n    case 'SET_SELECTION':\r\n      let SET_SELECTION = {...state}\r\n      //console.log(SET_SELECTION.figmaData.children[SET_SELECTION.currentPageIDX].children[SET_SELECTION.currentFrameIDX]);\r\n      SET_SELECTION.currentPageID = action.payload.currentPage.id\r\n      SET_SELECTION.selection = action.payload.selection\r\n    return SET_SELECTION;\r\n\r\n    case 'SET_ROTATES':\r\n      let SET_ROTATES = {...state}\r\n      SET_ROTATES.rotations = action.payload\r\n    return SET_ROTATES;\r\n\r\n    case 'SET_VECTORS':\r\n      let SET_VECTORS = {...state}\r\n      SET_VECTORS.vectors = action.payload\r\n    return SET_VECTORS;\r\n\r\n    case 'SET_EMAIL':\r\n      let SET_EMAIL = {...state}\r\n      SET_EMAIL.email = action.payload\r\n    return SET_EMAIL;\r\n\r\n    case 'SET_ONBARDING':\r\n      let SET_ONBARDING = {...state}\r\n      SET_ONBARDING.onBoarding = action.payload\r\n    return SET_ONBARDING;\r\n\r\n    case 'SET_ATTRIBUTE':\r\n      let SET_ATTRIBUTE = {...state}\r\n      if(SET_ATTRIBUTE.nodeTree.hasOwnProperty(action.payload.id)){\r\n        SET_ATTRIBUTE.nodeTree[action.payload.id][action.payload.attribute] = action.payload.value\r\n      }\r\n    return SET_ATTRIBUTE;\r\n\r\n    case 'ADD_CHILD_ELEMENT':\r\n      let ADD_CHILD_ELEMENT = {...state}\r\n      let startNodeTree = {}\r\n      if(ADD_CHILD_ELEMENT.nodeTree === null){\r\n        startNodeTree[action.payload.id] = action.payload\r\n        ADD_CHILD_ELEMENT.nodeTree = startNodeTree\r\n      } else ADD_CHILD_ELEMENT.nodeTree[action.payload.id] = action.payload\r\n\r\n    return ADD_CHILD_ELEMENT;\r\n\r\n    case 'GET_ME':\r\n      let GET_ME = {...state}\r\n      GET_ME.me = action.payload\r\n    return GET_ME;\r\n\r\n    case 'GET_IMAGES':\r\n      let GET_IMAGES = {...state}\r\n      GET_IMAGES.fileImages = action.payload\r\n    return GET_IMAGES;\r\n\r\n    case 'REMOVE_SMOOV':\r\n      let REMOVE_SMOOV = {...state}\r\n      REMOVE_SMOOV.smoov = false\r\n    return REMOVE_SMOOV;\r\n\r\n    case 'SET_TABLET':\r\n      let SET_TABLET = {...state}\r\n      SET_TABLET.smoov = true\r\n      SET_TABLET.protoWidth = SET_TABLET.tabletWidth\r\n      SET_TABLET.protoHeight = SET_TABLET.tabletHeight\r\n    return SET_TABLET;\r\n\r\n    case 'SET_DESKTOP':\r\n      let SET_DESKTOP = {...state}\r\n      SET_DESKTOP.smoov = true\r\n      SET_DESKTOP.protoWidth = window.innerWidth\r\n      SET_DESKTOP.protoHeight = window.innerHeight - 34\r\n    return SET_DESKTOP;\r\n\r\n    case 'SET_MOBILE':\r\n      let SET_MOBILE = {...state}\r\n      SET_MOBILE.smoov = true\r\n      SET_MOBILE.protoWidth = 375\r\n      SET_MOBILE.protoHeight = 812\r\n    return SET_MOBILE;\r\n\r\n    case 'SET_WIDTH':\r\n      let SET_WIDTH = {...state}\r\n      SET_WIDTH.protoWidth = action.payload\r\n    return SET_WIDTH;\r\n\r\n    case 'SET_HEIGHT':\r\n      let SET_HEIGHT = {...state}\r\n      SET_HEIGHT.protoHeight = action.payload\r\n    return SET_HEIGHT;\r\n\r\n    case 'SET_CURRENT_FRAME_ID':\r\n      let SET_CURRENT_FRAME_ID = {...state}\r\n      SET_CURRENT_FRAME_ID.currentFrameID = action.payload\r\n    return SET_CURRENT_FRAME_ID;\r\n\r\n    case 'SET_CURRENT_FRAME_IDX':\r\n      let SET_CURRENT_FRAME_IDX = {...state}\r\n      if(action.payload!== undefined)SET_CURRENT_FRAME_IDX.currentFrameIDX = action.payload\r\n    return SET_CURRENT_FRAME_IDX;\r\n\r\n    case 'RESET_CURRENTPAGE':\r\n      let RESET_CURRENTPAGE = {...state}\r\n      RESET_CURRENTPAGE.nodeTree = null\r\n      RESET_CURRENTPAGE.currentPageIDX = action.payload\r\n    return RESET_CURRENTPAGE;\r\n\r\n    case 'SET_CURRENT_PAGE_IDX':\r\n      let SET_CURRENT_PAGE_IDX = {...state}\r\n      SET_CURRENT_PAGE_IDX.currentPageIDX = action.payload\r\n    return SET_CURRENT_PAGE_IDX;\r\n\r\n    case 'RMV_LOADING':\r\n      let RMV_LOADING = {...state}\r\n      RMV_LOADING.loading = false\r\n    return RMV_LOADING;\r\n\r\n    case 'LOADING':\r\n      let LOADING = {...state}\r\n      LOADING.loading = true\r\n    return LOADING;\r\n\r\n    case 'TOKEN':\r\n      let TOKEN = {...state}\r\n      TOKEN.token = action.payload\r\n    return TOKEN;\r\n\r\n    case 'UPDATE_FILE_DATA_FROM_FIGMA':\r\n      let UPDATE_FILE_DATA_FROM_FIGMA = {...state}\r\n      UPDATE_FILE_DATA_FROM_FIGMA.authData = action.payload.authData\r\n      UPDATE_FILE_DATA_FROM_FIGMA.figmaData = action.payload.pageData\r\n      //UPDATE_FILE_DATA_FROM_FIGMA.loading = false\r\n      UPDATE_FILE_DATA_FROM_FIGMA.nodeTree = null\r\n    return UPDATE_FILE_DATA_FROM_FIGMA;\r\n\r\n\r\n    default: throw new Error('Unexpected action');\r\n  }\r\n}\r\n\r\nexport default PyroReducer\r\nexport { initialPyroState }\r\n","export default __webpack_public_path__ + \"static/media/pyro_white.1a68b823.svg\";","import { useState,useEffect } from 'react'\r\nimport firebase from '../Utils/firebase'\r\n\r\nconst useAuth = ()=>{\r\n  const [user,setUser] = useState(null)\r\n\r\n  const listenToAuthState = ()=>\r\n    firebase.auth()\r\n      .onAuthStateChanged(user=>setUser(user))\r\n\r\n  useEffect(listenToAuthState,[])\r\n\r\n  return user\r\n}\r\n\r\nexport default useAuth\r\n","import React from 'react'\r\nimport './Loading.css'\r\n\r\nconst Loading = ()=>(\r\n  <main className=\"Loading\">\r\n    Loading...\r\n  </main>\r\n)\r\nexport default Loading\r\n","import firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\n\r\nconst SignIn = ()=>{\r\n  const auth = firebase.auth()\r\n\r\n  const signInWithGoogle=()=>{\r\n    const provider = new firebase.auth.GoogleAuthProvider()\r\n    auth.signInWithPopup(provider)\r\n  }\r\n  return (\r\n    <main className=\"SignIn\">\r\n      <button className=\"btn full\" onClick={signInWithGoogle}>Sign in</button>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default SignIn\r\n","import { useState,useEffect } from 'react'\r\nimport Loading from '../Loading'\r\nimport SignIn from '../SignIn'\r\nimport './Login.css'\r\n\r\nconst Login = ()=>{\r\n  const [showUp,setShowUp] = useState(false)\r\n  useEffect(()=>{\r\n    const unSub = setTimeout(()=>setShowUp(true),500)\r\n    return ()=> clearTimeout(unSub)\r\n  },[])\r\n  if(!showUp) return <Loading/>\r\n  return (\r\n    <main className=\"Login\">\r\n      <section>\r\n        <h1>Welcome 😊</h1>\r\n        <h2>Please sign in <br/>so we can let you in!</h2>\r\n        <p>Let me check if you  have access. <br/>You only have to do this once.</p>\r\n        <SignIn/>\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\nexport default Login\r\n","import firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\n\r\nconst SignOut = ({css})=>{\r\n  const auth = firebase.auth()\r\n  return (\r\n    <main className=\"SignOut\">\r\n      <button className={`btn ${css}`} onClick={()=>auth.signOut()} >Sign out</button>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default SignOut\r\n","import { useContext,useState,useEffect } from 'react'\r\nimport Loading from '../Loading'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\n\r\nimport SignOut from '../SignOut'\r\nimport './UserNotAllowed.css'\r\n\r\nconst UserNotAllowed = ()=>{\r\n  const [showUp,setShowUp] = useState(false)\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { userData } = useContext(PyroStateContext)\r\n  const sendRequest= ()=>{\r\n    console.log('sendRequest');\r\n  }\r\n  const handleRequest = ()=>{\r\n    sendRequest()\r\n    dispatch({type:'SHOW_REQUEST'})\r\n  }\r\n  useEffect(()=>{\r\n    const unSub = setTimeout(()=>setShowUp(true),500)\r\n    return ()=> clearTimeout(unSub)\r\n  },[])\r\n  if(!showUp) return <Loading/>\r\n  if(!userData)return null\r\n  const { displayName,email } = userData\r\n  return (\r\n    <main className=\"UserNotAllowed\">\r\n      <section>\r\n        <h1>Sorry,<br/>you're not on <br/>the list 😞</h1>\r\n        <p>You are logged in as <strong>{displayName}</strong></p>\r\n        <p>With the email <strong>{email}</strong></p>\r\n        <div className=\"btnCtn\">\r\n          <SignOut css=\"ghost\"/>\r\n          <button onClick={handleRequest} className=\"btn full\">Request access</button>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\nexport default UserNotAllowed\r\n","import React,{ useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport './User.css'\r\n\r\nconst User = ()=>{\r\n  const { userData } = useContext(PyroStateContext)\r\n  const { displayName,email,photoURL} = userData\r\n\r\n  return (\r\n    <div className=\"User\">\r\n      {photoURL&&<img src={photoURL} width=\"30\" alt={displayName}/>}\r\n      <span>{displayName}</span>\r\n    </div>\r\n  )\r\n}\r\nexport default User\r\n","import { useEffect,useContext } from 'react'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport './Pile.css'\r\n\r\nconst Pile = ({msg})=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  useEffect(()=>{\r\n    setTimeout(()=>dispatch({type:'HIDE_REQUEST'}),3000)\r\n  },[])\r\n  return (\r\n    <main className=\"Pile\">\r\n      <article>{msg}</article>\r\n    </main>\r\n  )\r\n}\r\nexport default Pile\r\n","const floatToRGB = channel =>{\r\n  if (channel!== 0 && channel!== 1) return channel*255\r\n  else if(channel === 1) return 255\r\n  else return channel\r\n}\r\nconst RenderedColor = color => {\r\n  const {r,g,b,a} = color\r\n  const alpha = a?','+a+')':')'\r\n  return 'rgb('+floatToRGB(r)+','+floatToRGB(g)+','+floatToRGB(b)+alpha\r\n}\r\nexport default RenderedColor\r\n","import React,{ useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport './InputDimensions.css'\r\n\r\nconst InputDimensions = ()=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { protoWidth,protoHeight,minWidth,minHeight,smoov } = useContext(PyroStateContext)\r\n  const setInputDimensions = (e,isWidth) =>{\r\n    if(!isNaN(Number(e.target.value)))dispatch({type:isWidth?'SET_WIDTH':'SET_HEIGHT',payload:Number(e.target.value)})\r\n  }\r\n  const checkMax = (e,isWidth) =>{\r\n    if(isWidth){\r\n      if(Number(e.target.value)>window.innerWidth){\r\n        dispatch({type:'SET_WIDTH',payload:window.innerWidth})\r\n      }\r\n      if(Number(e.target.value)<minWidth){\r\n        dispatch({type:'SET_WIDTH',payload:minWidth})\r\n      }\r\n    } else {\r\n      if(Number(e.target.value)>window.innerHeight){\r\n        dispatch({type:'SET_HEIGHT',payload:window.innerHeight - 35})\r\n      }\r\n      if(Number(e.target.value)<minHeight){\r\n        dispatch({type:isWidth?'SET_WIDTH':'SET_HEIGHT',payload:minHeight})\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"InputDimensions\">\r\n      <span>w</span>\r\n      <input\r\n        disabled={smoov}\r\n        onFocus={e=>e.target.select()}\r\n        onChange={e=>setInputDimensions(e,true)}\r\n        onBlur={e=>checkMax(e,true)}\r\n        value={Math.round(protoWidth)}\r\n        type=\"text\"/>\r\n      <span>h</span>\r\n      <input\r\n        disabled={smoov}\r\n        onFocus={e=>e.target.select()}\r\n        onChange={e=>setInputDimensions(e,false)}\r\n        onBlur={e=>checkMax(e,false)}\r\n        value={Math.round(protoHeight)}\r\n        type=\"text\"/>\r\n  </div>\r\n  )\r\n}\r\nexport default InputDimensions\r\n","export default __webpack_public_path__ + \"static/media/mobile.bcb52078.svg\";","export default __webpack_public_path__ + \"static/media/tablet.cfcfcd73.svg\";","export default __webpack_public_path__ + \"static/media/desktop.9125ff19.svg\";","import React,{ useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport mobile from '../../assets/images/mobile.svg'\r\nimport tablet from '../../assets/images/tablet.svg'\r\nimport desktop from '../../assets/images/desktop.svg'\r\nimport './Dimensions.css'\r\n\r\nconst Dimensions = ()=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { protoWidth,protoHeight,smoov,tabletWidth,tabletHeight } = useContext(PyroStateContext)\r\n  const setDimensions = dimensions =>{\r\n    let size = \"SET_MOBILE\"\r\n    switch (dimensions) {\r\n      case \"mobile\":size=\"SET_MOBILE\";break;\r\n      case \"desktop\":size=\"SET_DESKTOP\";break;\r\n      case \"tablet\":size=\"SET_TABLET\";break;\r\n      default:size=\"SET_MOBILE\";\r\n    }\r\n    dispatch({type:size})\r\n    setTimeout(()=>dispatch({type:'REMOVE_SMOOV'}),1000)\r\n  }\r\n  return (\r\n    <div className=\"Dimensions\">\r\n      <button\r\n        disabled={smoov}\r\n        onClick={()=>setDimensions(\"mobile\")}\r\n        className={protoWidth <= 450 ?'active':null}>\r\n        <img src={mobile} alt=\"mobile\"/>\r\n      </button>\r\n      <button\r\n        disabled={smoov}\r\n        onClick={()=>setDimensions(\"desktop\")}\r\n        className={protoWidth > 1024 ?'active':null}>\r\n        <img src={desktop} alt=\"desktop\"/>\r\n      </button>\r\n      <button\r\n        disabled={smoov}\r\n        onClick={()=>setDimensions(\"tablet\")}\r\n        className={protoWidth === tabletWidth&&protoHeight === tabletHeight ?'active':null}>\r\n        <img src={tablet} alt=\"mobile\"/>\r\n      </button>\r\n  </div>\r\n  )\r\n}\r\nexport default Dimensions\r\n","import React,{ useContext,useState } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport InputDimensions from '../InputDimensions'\r\nimport User from '../User'\r\nimport SignOut from '../SignOut'\r\nimport Dimensions from '../Dimensions'\r\nimport pyro from '../../assets/images/pyro_white.svg'\r\nimport './ProtoActions.css'\r\n\r\nconst ProtoActions = ()=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { userData,loading,figmaData,token,currentPageIDX,figmaFile,currentFrameID } = useContext(PyroStateContext)\r\n  const [ pagesOpen,setPagesOpen ] = useState(false)\r\n  const handlePageMenuClick = e =>{\r\n    dispatch({type:'SET_CURRENT_PAGE_IDX',payload:Number(e.target.getAttribute('idx'))})\r\n    setPagesOpen(false)\r\n  }\r\n\r\n  return (\r\n    <nav className=\"ProtoActions\">\r\n      <section>\r\n        <img src={pyro} height=\"27\" alt=\"pyro\"/>\r\n      </section>\r\n      {figmaData&&currentFrameID?\r\n        (<section className=\"fileInfo\">\r\n          <h1>{figmaData.name} - {figmaData.children[currentPageIDX].name}</h1>\r\n        </section>):\r\n        <h1 className=\"faded\">Proto name - Page name</h1>\r\n        }\r\n      <section className=\"actions\">\r\n        <button className=\"btn full\"><span>Share</span></button>\r\n        <Dimensions/>\r\n        <InputDimensions/>\r\n        {userData&&<User/>}\r\n        <SignOut css=\"full\"/>\r\n    </section>\r\n  </nav>\r\n  )\r\n}\r\nexport default ProtoActions\r\n","import React from 'react'\r\nimport './Empty.css'\r\n\r\nconst Empty = ()=>(\r\n  <section className=\"Empty\">\r\n    <p>\r\n      <span>Nothing to see here</span>\r\n      <span>😲</span>\r\n    </p>\r\n  </section>\r\n)\r\nexport default Empty\r\n","const ReturnVisibility = (pluginState,condition) =>{\r\n  const isC2 = String(condition.condition2)==='true'||String(condition.condition2)==='false'?String(condition.condition2):String(pluginState.pluginVariables[condition.condition2]).toLowerCase()\r\n  const nbC1 = Number(pluginState.pluginVariables[condition.condition1])\r\n  const nbC2 = isC2 === 'mt'?0:Number(isC2)\r\n  const c1 = String(pluginState.pluginVariables[condition.condition1]).toLowerCase()\r\n  let thisString = isC2 === 'mt'?'':isC2\r\n  switch (condition.operator) {\r\n    case 'isEqualTo':\r\n      if(c1 === isC2) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    case 'different':\r\n      if(c1 !== thisString) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    case 'contains':\r\n      const idxC2 = pluginState.pluginVariables[condition.condition1].toLowerCase().indexOf(thisString)\r\n      if(idxC2!== -1) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    case 'isGreaterThan':\r\n      if(isNaN(nbC1)||isNaN(nbC2))return false\r\n      if(nbC1 > nbC2) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    case 'isInferiorTo':\r\n      if(isNaN(nbC1)||isNaN(nbC2))return false\r\n      if(nbC1 < nbC2) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    case 'isGreaterThanOrEqualTo':\r\n      if(isNaN(nbC1)||isNaN(nbC2))return false\r\n      if(nbC1 >= nbC2) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    case 'isInferiorOrEqualTo':\r\n      if(isNaN(nbC1)||isNaN(nbC2))return false\r\n      if(nbC1 <= nbC2) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    default: return 'nothing'\r\n  }\r\n\r\n}\r\nexport default ReturnVisibility\r\n","import React,{ useRef,useEffect,useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport './Gradients.css'\r\n\r\nconst Gradients = ({bg,gradType})=>{\r\n  const { protoWidth,protoHeight,figmaData } = useContext(PyroStateContext)\r\n  const canvasRef = useRef(null)\r\n  const { opacity,blendMode,gradientStops,gradientTransform } = bg\r\n\r\n  const makeGradients =()=>{\r\n    const startGradient = gradientTransform.start\r\n    const endGradient = gradientTransform.end\r\n    const c = canvasRef.current.getContext('2d')\r\n    c.clearRect(0, 0, Math.round(protoWidth), protoHeight)\r\n\r\n    const x0 = startGradient.x*Math.round(protoWidth)\r\n    const y0 = startGradient.y*Math.round(protoHeight)\r\n    const x1 = endGradient.x*Math.round(protoWidth)\r\n    const y1 = endGradient.y*Math.round(protoHeight)\r\n    const gradientWith = Math.sqrt(((x0-y0)*(x0-y0))+((x1-y1)*(x1-y1)))\r\n    let grad\r\n    switch (gradType) {\r\n      case 'linear':grad = c.createLinearGradient(x0,y0,x1,y1);break;\r\n      case 'radial':grad = c.createRadialGradient(x0,y0,0,x0,y0,gradientWith);break;\r\n      default:grad = c.createLinearGradient(x0,y0,x1,y1);break;\r\n    }\r\n\r\n    gradientStops.forEach((stop,idx) => {\r\n      const { position,color } = stop\r\n      grad.addColorStop(position,RenderedColor(color))\r\n    })\r\n    c.fillStyle = grad\r\n    c.fillRect(0,0,Math.round(protoWidth),Math.round(protoHeight))\r\n  }\r\n\r\n  const bgBlend = ()=> {\r\n    return {\r\n      opacity: opacity,\r\n      mixBlendMode: blendMode.toLowerCase().split('_').join('-')\r\n    }\r\n  }\r\n\r\n\r\n\r\n  useEffect(makeGradients,[figmaData,protoHeight,protoWidth])\r\n  return (\r\n    <div style={bgBlend()} className=\"Gradients\">\r\n      <canvas\r\n        width={protoWidth}\r\n        height={protoHeight}\r\n        ref={canvasRef}/>\r\n    </div>\r\n  )\r\n}\r\nexport default Gradients\r\n","import React from 'react'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport './SolidBG.css'\r\n\r\nconst SolidBG = ({bg})=>{\r\n  const sldBg = ()=>{\r\n    return {\r\n      background:RenderedColor(bg.color),\r\n      opacity: bg.opacity,\r\n      mixBlendMode: bg.blendMode.toLowerCase().split('_').join('-')\r\n    }\r\n  }\r\n  return <div className=\"SolidBG\" style={sldBg()}/>\r\n}\r\nexport default SolidBG\r\n","import React,{ useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport './ImageBG.css'\r\n\r\nconst ImageBG = ({bg,constraints})=>{\r\n  const { fileImages,protoWidth,protoHeight,smoov } = useContext(PyroStateContext)\r\n  const fill = ()=>{\r\n    if(protoWidth < protoHeight) return {height:protoHeight}\r\n    return {height:protoWidth}\r\n  }\r\n  const tile = ()=>{\r\n    if(fileImages) return {...bgBlend(),backgroundImage:\"url(\"+fileImages[bg.imageRef]+\")\"}\r\n    return null\r\n  }\r\n\r\n  const bgBlend = ()=> {\r\n    return {\r\n      opacity: bg.opacity,\r\n      mixBlendMode: bg.blendMode.toLowerCase().split('_').join('-')\r\n    }\r\n  }\r\n\r\n  if(!fileImages)return null\r\n  return (\r\n    <div\r\n      style={bg.scaleMode==='TILE'?tile():bgBlend()}\r\n      className={`ImageBG ${bg.scaleMode.toLowerCase()} ${constraints.horizontal === \"CENTER\"?'maxWidth':null} ${protoWidth<protoHeight?'portrait':'landscape'} ${smoov?'smoov':''}`}>\r\n      {bg.scaleMode!=='TILE'&&<img src={fileImages[bg.imageRef]} style={bg.scaleMode === 'FILL'?fill():null}alt=\"protoBg\"/>}\r\n    </div>\r\n  )\r\n}\r\nexport default ImageBG\r\n","import React from 'react'\r\nimport Gradients from '../Gradients'\r\nimport SolidBG from '../SolidBG'\r\nimport ImageBG from '../ImageBG'\r\nimport './Background.css'\r\n\r\nconst Background = ({ element })=>{\r\n\r\n  const makeBackground = (bg,idx) => {\r\n    const key = element.id+idx\r\n    if (!bg.hasOwnProperty(\"visible\")||bg.visible) {\r\n      switch (bg.type) {\r\n\r\n        case \"GRADIENT_LINEAR\":\r\n          return (\r\n              <Gradients\r\n                gradType=\"linear\"\r\n                key={key}\r\n                bg={bg}/>\r\n            );break;\r\n\r\n        case \"GRADIENT_RADIAL\":\r\n        case \"GRADIENT_DIAMOND\":\r\n        case \"GRADIENT_ANGULAR\":\r\n          return (\r\n              <Gradients\r\n                gradType=\"radial\"\r\n                key={key}\r\n                bg={bg}/>\r\n            );break;\r\n\r\n        case \"IMAGE\": return <ImageBG constraints={element.constraints} bg={bg} key={key}/>;break;\r\n\r\n        default: return <SolidBG bg={bg} key={key}/>\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  if(!element.hasOwnProperty(\"background\")&&!element.hasOwnProperty(\"fills\"))return null\r\n  return (\r\n    <section className=\"Background\">\r\n      {(element.hasOwnProperty(\"background\")&&element.background&&element.background.length>0)&&element.background.map((bg,idx)=>makeBackground(bg,idx))}\r\n      {(element.hasOwnProperty(\"fills\")&&element.fills.length>0)&&element.fills.map((bg,idx)=>makeBackground(bg,idx))}\r\n    </section>\r\n  )\r\n}\r\nexport default Background\r\n","import React,{ useRef,useEffect,useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport './StrokeGradients.css'\r\n\r\nconst StrokeGradients = ({str,gradType,strokeWeight})=>{\r\n  const { protoWidth,protoHeight,figmaData } = useContext(PyroStateContext)\r\n  const canvasRef = useRef(null)\r\n  const { opacity,blendMode,gradientHandlePositions,gradientStops } = str\r\n\r\n  const makeStrokeGradients =()=>{\r\n    const startGradient = gradientHandlePositions[0]\r\n    const endGradient = gradientHandlePositions[1]\r\n    const c = canvasRef.current.getContext('2d')\r\n    c.clearRect(0, 0, Math.round(protoWidth), protoHeight)\r\n\r\n    const x0 = startGradient.x*Math.round(protoWidth)\r\n    const y0 = startGradient.y*Math.round(protoHeight)\r\n    const x1 = endGradient.x*Math.round(protoWidth)\r\n    const y1 = endGradient.y*Math.round(protoHeight)\r\n    const gradientWith = Math.sqrt(((x0-y0)*(x0-y0))+((x1-y1)*(x1-y1)))\r\n    let grad\r\n    switch (gradType) {\r\n      case 'linear':grad = c.createLinearGradient(x0,y0,x1,y1);break;\r\n      case 'radial':grad = c.createRadialGradient(x0,y0,0,x0,y0,gradientWith);break;\r\n      default:grad = c.createLinearGradient(x0,y0,x1,y1);break;\r\n    }\r\n\r\n    gradientStops.forEach((stop,idx) => {\r\n      const { position,color } = stop\r\n      grad.addColorStop(position,RenderedColor(color))\r\n    })\r\n    c.strokeStyle = grad\r\n    c.lineWidth = strokeWeight*2\r\n    c.strokeRect(0,0,Math.round(protoWidth),Math.round(protoHeight))\r\n  }\r\n\r\n  const strBlend = ()=> {\r\n    return {\r\n      opacity: opacity,\r\n      mixBlendMode: blendMode.toLowerCase().split('_').join('-')\r\n    }\r\n  }\r\n\r\n\r\n\r\n  useEffect(makeStrokeGradients,[figmaData,protoHeight,protoWidth])\r\n  return (\r\n    <div style={strBlend()} className=\"StrokeGradients\">\r\n      <canvas\r\n        width={protoWidth}\r\n        height={protoHeight}\r\n        ref={canvasRef}/>\r\n    </div>\r\n  )\r\n}\r\nexport default StrokeGradients\r\n","import React from 'react'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport './StrokeSolidBG.css'\r\n\r\nconst StrokeSolidBG = ({element,str,strokeWeight})=>{\r\n\r\n  const radius = ()=>{\r\n    if(element.hasOwnProperty(\"rectangleCornerRadius\")){\r\n      return element.rectangleCornerRadius.reduce((acc,itm,idx)=>{\r\n        acc = acc + itm+\"px \"\r\n        return acc\r\n      },\"\")\r\n    } else if(element.hasOwnProperty('cornerRadius')){\r\n      return element.cornerRadius + 'px'\r\n    } else return null\r\n  }\r\n\r\n  const sldBg = ()=>{\r\n    return {\r\n      borderRadius:radius(),\r\n      border: strokeWeight +\"px solid \" + RenderedColor(str.color),\r\n      opacity: str.opacity,\r\n      mixBlendMode: str.blendMode.toLowerCase().split('_').join('-')\r\n    }\r\n  }\r\n  return <div className=\"StrokeSolidBG\" style={sldBg()}/>\r\n}\r\nexport default StrokeSolidBG\r\n","import React from 'react'\r\nimport StrokeGradients from '../StrokeGradients'\r\nimport StrokeSolidBG from '../StrokeSolidBG'\r\nimport './Stroke.css'\r\n\r\nconst Stroke = ({ element })=>{\r\n  if(!element.hasOwnProperty('strokes')) return null\r\n  const makeStroke = (str,idx) => {\r\n    const key = element.id+idx\r\n    if (!str.hasOwnProperty(\"visible\")||str.visible) {\r\n      switch (str.type) {\r\n\r\n        case \"GRADIENT_LINEAR\":\r\n          return (\r\n              <StrokeGradients\r\n                strokeWeight={element.strokeWeight}\r\n                gradType=\"linear\"\r\n                key={key}\r\n                str={str}/>\r\n            );break;\r\n\r\n        case \"GRADIENT_RADIAL\":\r\n        case \"GRADIENT_DIAMOND\":\r\n        case \"GRADIENT_ANGULAR\":\r\n          return (\r\n              <StrokeGradients\r\n                strokeWeight={element.strokeWeight}\r\n                gradType=\"radial\"\r\n                key={key}\r\n                str={str}/>\r\n            );break;\r\n\r\n        default: return (\r\n          <StrokeSolidBG\r\n            strokeWeight={element.strokeWeight}\r\n            element={element}\r\n            str={str}\r\n            key={key}/>\r\n        )\r\n      }\r\n    }\r\n    return null\r\n  }\r\n  if(element.strokes.length ===0)return null\r\n  return (\r\n    <section className=\"Stroke\">\r\n      {element.hasOwnProperty(\"strokes\")&&element.strokes.map((str,idx)=>makeStroke(str,idx))}\r\n    </section>\r\n  )\r\n}\r\nexport default Stroke\r\n","import React,{ useContext,useEffect,useState } from 'react'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport Background from '../Background'\r\nimport Stroke from '../Stroke'\r\nimport './Vector.css'\r\n\r\nconst Vector = ({handleClick,node,style}) =>{\r\nconst { vectors } = useContext(PyroStateContext)\r\nconst { transitionNodeID,name,id,strokeWeight } = node\r\nconst {vectorPaths,width,height} = vectors[id]\r\nconst [vectorStyle,setVectorStyle] = useState({...style})\r\nconst [SVGStyle,setSVGStyle] = useState(null)\r\nconst [pathStyle,setPathStyle] = useState(null)\r\n\r\nconst setVector = ()=>{\r\n  let tempStyle = {...vectorStyle}\r\n  tempStyle.width = width\r\n  tempStyle.height = height\r\n  tempStyle[\"WebkitClipPath\"] = \"url(#\"+id+\")\"\r\n  setVectorStyle(tempStyle)\r\n  let tempSVG = {}\r\n  tempSVG.width = width\r\n  tempSVG.height = height\r\n  setSVGStyle(tempSVG)\r\n  let path = {}\r\n  path.stroke = width\r\n  path.strokeWidth = strokeWeight*2\r\n  if(node.strokes.length)path.stroke = RenderedColor(node.strokes[0].color)\r\n  setPathStyle(path)\r\n}\r\nuseEffect(setVector,[])\r\n  return (\r\n    <article\r\n      onClick={handleClick}\r\n      className={`Vector ${transitionNodeID?'clickable':null}`}\r\n      style={vectorStyle}>\r\n      <Background element={node}/>\r\n      <svg\r\n        style={SVGStyle}\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={width}\r\n        height={height}\r\n        viewBox={`0 0 ${width} ${height}`}>\r\n        <path strokeLinecap=\"round\" style={pathStyle} d={vectorPaths}/>\r\n      </svg>\r\n      <svg\r\n        style={SVGStyle}\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={width}\r\n        height={height}\r\n        viewBox={`0 0 ${width} ${height}`}>\r\n          <defs>\r\n            <clipPath id={id} >\r\n              <path d={vectorPaths}/>\r\n            </clipPath>\r\n         </defs>\r\n      </svg>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport default Vector\r\n","import React,{ useEffect,useState,useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport ReturnVisibility from '../../Utils/ReturnVisibility'\r\nimport Background from '../Background'\r\nimport './Text.css'\r\n\r\nconst Text = ({handleClick,node,style:posStyle}) =>{\r\nconst {\r\n  id,\r\n  transitionNodeID,\r\n  name,\r\n  characters,\r\n  textAlignHorizontal,\r\n  textAlignVertical,\r\n  textAutoResize,\r\n  textCase,\r\n  textDecoration,\r\n  fontName,\r\n  fontSize,\r\n  layoutAlign,\r\n  layoutGrow,\r\n  letterSpacing,\r\n  lineHeight,\r\n  listSpacing\r\n } = node\r\nconst [ textStyles,setTextStyles ] = useState(null)\r\nconst txtStyles = {\r\n  textAlign:textAlignHorizontal,\r\n  textAlignVertical,\r\n  textAutoResize,\r\n  textTransform:textCase,\r\n  textDecoration,\r\n  fontStyle:fontName.style,\r\n  fontFamily:fontName.family,\r\n  fontSize,\r\n  layoutAlign,\r\n  layoutGrow,\r\n  letterSpacing,\r\n  lineHeight,\r\n  listSpacing\r\n}\r\n\r\nconst { pluginState } = useContext(PyroStateContext)\r\n\r\nconst getStyles = ()=>{\r\n  switch (txtStyles.textTransform) {\r\n    case \"UPPER\":txtStyles.textTransform=\"uppercase\";break;\r\n    case \"LOWER\":txtStyles.textTransform=\"lowercase\";break;\r\n    case \"TITLE\":txtStyles.textTransform=\"capitalize\";break;\r\n    default: txtStyles.textTransform=\"normal\";\r\n  }\r\n  delete txtStyles[\"textCase\"]\r\n  delete txtStyles[\"lineHeightPercent\"]\r\n  delete txtStyles[\"lineHeightPx\"]\r\n  delete txtStyles[\"textAutoResize\"]\r\n  if(txtStyles.textAlignVertical !== \"TOP\"||txtStyles.textAlignHorizontal!==\"LEFT\"){\r\n    txtStyles.display = \"flex\"\r\n    let justif,align\r\n    switch (txtStyles.textAlignHorizontal) {\r\n      case \"CENTER\":\r\n        justif = \"center\"\r\n        txtStyles.margin = \"auto\";\r\n      break;\r\n      case \"RIGHT\":justif = \"flex-end\";break;\r\n    }\r\n    switch (txtStyles.textAlignVertical) {\r\n      case \"CENTER\":\r\n        align = \"center\";\r\n        txtStyles.margin = \"auto\";\r\n      break;\r\n      case \"BOTTOM\":align = \"flex-end\";break;\r\n    }\r\n    txtStyles.justifyContent = justif\r\n    txtStyles.alignItems = align\r\n  }\r\n\r\n  txtStyles.color = RenderedColor(node.fills[0].color)\r\n  setTextStyles(txtStyles)\r\n}\r\nconst sumStyles = ()=>{\r\n  const temp = {...posStyle,...textStyles}\r\n  if(pluginState.pluginConditions.hasOwnProperty(id)) {\r\n    const showMe = Object.keys(pluginState.pluginConditions[id]).every(condition => {\r\n      const isVisible = ReturnVisibility(pluginState,pluginState.pluginConditions[id][condition])\r\n      if(isVisible) return true\r\n      else return false\r\n    })\r\n    if(!showMe)temp.display = \"none\"\r\n    else temp.display = \"block\"\r\n  }\r\n  delete temp.height\r\n  return temp\r\n}\r\nuseEffect(getStyles,[])\r\nif(!pluginState)return null\r\nconst { pluginTexts,pluginVariables,pluginConditions } = pluginState\r\n  return (\r\n    <p\r\n      onClick={handleClick}\r\n      style={sumStyles()}\r\n      className={`Text ${node.name.split(' ')[0]} ${transitionNodeID?'clickable':null}`}>\r\n      {(pluginTexts&&pluginTexts.hasOwnProperty(id)&&pluginVariables[pluginTexts[id].varID]==='mt')?'':pluginTexts&&pluginTexts.hasOwnProperty(id)?String(pluginVariables[pluginTexts[id].varID]):characters}\r\n    </p>\r\n  )\r\n}\r\n\r\nexport default Text\r\n","import React,{ useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport Background from '../Background'\r\nimport './Field.css'\r\n\r\nconst Field = ({handleClick,node,style}) =>{\r\n  const { transitionNodeID,name,id } = node\r\n  const dispatch= useContext(PyroDispatchContext)\r\n  const { pluginState } = useContext(PyroStateContext)\r\n  const { pluginFields,pluginVariables } = pluginState\r\n  const { placeHolder,type,varID } = pluginFields[id]\r\n\r\n  return (\r\n    <input\r\n      className=\"Field\"\r\n      onFocus={e=>e.target.select()}\r\n      onChange={e=>dispatch({type:'UPDATE_FIELD_VALUE',payload:{val:e.target.value,variable:varID}})}\r\n      placeholder={placeHolder}\r\n      type={type}\r\n      value={pluginVariables[varID]==='mt'?'':pluginVariables[varID]}/>\r\n  )\r\n}\r\n\r\nexport default Field\r\n","import React from 'react'\r\nimport Background from '../Background'\r\nimport './Ellipse.css'\r\n\r\nconst Ellipse = ({handleClick,node,style}) =>(\r\n  <article\r\n    onClick={handleClick}\r\n    style={style}\r\n    className={`Ellipse ${node.name.split(' ').join('_')} ${node.transitionNodeID?'clickable':null}`}>\r\n    <Background element={node}/>\r\n  </article>\r\n)\r\n\r\nexport default Ellipse\r\n","import React,{ useContext,useEffect,useState } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport ReturnVisibility from '../../Utils/ReturnVisibility'\r\nimport Background from '../Background'\r\nimport Stroke from '../Stroke'\r\nimport Vector from '../Vector'\r\nimport Text from '../Text'\r\nimport Field from '../Field'\r\nimport Ellipse from '../Ellipse'\r\nimport './Element.css'\r\n\r\nconst Element = ({node,parent}) =>{\r\n\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { updateVis,pluginState,pluginStateChanges,rotations,vectors,figmaData,currentFrameID,nodeTree,protoWidth,protoHeight,currentPageIDX } = useContext(PyroStateContext)\r\n\r\n  const currentPage = figmaData.children[currentPageIDX]\r\n  const currentFrame = currentPage.children[currentFrameID]\r\n  const { transitionNodeID,opacity,effects,visible,constraints,type,id,name,absoluteBoundingBox,layoutMode,reactions } = node\r\n  const [ parentNode,setParentNode ] = useState(currentFrame)\r\n  const [ nodeStyle,setNodeStyle ] = useState(null)\r\n  const [ flexChild,setFlexChild ] = useState(false)\r\n  const [ clickable,makeClickable ] = useState(false)\r\n  const [ classNames,setClassNames ] = useState('')\r\n  const flexParent = node.hasOwnProperty(\"layoutMode\")\r\n  let tempStyle = {}\r\n\r\n  const setDimension =()=>{\r\n    const { width,height } = absoluteBoundingBox\r\n    if(constraints){\r\n      switch (constraints.horizontal) {\r\n        case \"CENTER\":case \"MIN\":case \"MAX\":\r\n          if(node.layoutAlign!=='STRETCH')tempStyle.width = width;\r\n        break;\r\n      }\r\n      switch (constraints.vertical) {\r\n        case \"CENTER\":case \"MIN\":case \"MAX\":\r\n          if(node.layoutGrow!== 1)tempStyle.height = height\r\n          else tempStyle.height = \"100%\";\r\n        break;\r\n      }\r\n    } else {\r\n      tempStyle.width = width\r\n      tempStyle.height = height\r\n    }\r\n\r\n    if(effects.length){\r\n      tempStyle.width = node.width\r\n      tempStyle.height = node.height\r\n    }\r\n\r\n  }\r\n\r\n  const setOpacity =()=> tempStyle.opacity = opacity.toFixed(2)\r\n  const setAxis= priority =>{\r\n    let axis = null\r\n    if (priority !== undefined) {\r\n      switch (priority) {\r\n        case \"SPACE_AROUND\":axis = \"space-around\";break;\r\n        case \"SPACE_BETWEEN\":axis = \"space-between\";break;\r\n        case \"FIXED\":axis = \"flex-start\";break;\r\n        case \"CENTER\":axis = \"center\";break;\r\n        case \"MAX\":axis = \"flex-end\";break;\r\n        default: axis = \"flex-start\"\r\n      }\r\n    }\r\n    return axis\r\n  }\r\n\r\n  const setFlex =()=>{\r\n    const { primaryAxisAlignItems,counterAxisAlignItems } = node\r\n    tempStyle.display = \"flex\"\r\n    if(layoutMode === 'VERTICAL')tempStyle.flexDirection = 'column'\r\n    tempStyle.justifyContent = setAxis(primaryAxisAlignItems)\r\n    tempStyle.alignItems = setAxis(counterAxisAlignItems)\r\n    const { paddingTop,paddingRight,paddingBottom,paddingLeft } = node\r\n    tempStyle.padding = paddingTop?paddingTop:0+\"px \"+paddingRight?paddingRight:0+\"px \"+paddingBottom?paddingBottom:0+\"px \"+paddingLeft?paddingLeft:0+\"px\"\r\n    tempStyle.boxSizing = \"border-box\"\r\n  }\r\n\r\n  const setEffects =()=>{\r\n    if(effects){\r\n      effects.forEach(fx => {\r\n        const {type:fxType,offset,radius,visible,color} = fx\r\n        if (visible) {\r\n          switch (fxType) {\r\n            case \"DROP_SHADOW\":\r\n              const { x,y } = offset\r\n              tempStyle.boxShadow = x +\"px \"+y+\"px \"+radius+\"px \"+ RenderedColor(color);\r\n            break;\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n  const setRotate =()=>tempStyle.transform = \"rotate(\"+Math.round(rotations[id].rotation)+\"deg)\"\r\n  //@TODO rotate shadow as well :)\r\n\r\n\r\n  const setPosition =()=>{\r\n    const { x,y,width,height } = absoluteBoundingBox\r\n    tempStyle.position = \"absolute\"\r\n    let top = y - currentFrame.absoluteBoundingBox.y\r\n    let left = x - currentFrame.absoluteBoundingBox.x\r\n\r\n    if(constraints){\r\n\r\n      switch (constraints.horizontal) {\r\n        case \"SCALE\":\r\n          tempStyle.left = left\r\n          //tempStyle.width = width/currentFrame.absoluteBoundingBox.width*100 + \"%\"\r\n        ;break;\r\n        case \"MIN\":case \"CENTER\":tempStyle.left = left ;break;\r\n        case \"MAX\": tempStyle.right = currentFrame.absoluteBoundingBox.width - (width + left);break;\r\n        case \"STRETCH\":\r\n          tempStyle.left = left\r\n          tempStyle.right = currentFrame.absoluteBoundingBox.width - (width + left)\r\n        ;break;\r\n      }\r\n      switch (constraints.vertical) {\r\n        case \"SCALE\":\r\n          tempStyle.top = top\r\n          //tempStyle.height = height/currentFrame.absoluteBoundingBox.height*100 + \"%\"\r\n          ;break;\r\n        case \"MIN\":case \"CENTER\":tempStyle.top = top;break;\r\n        case \"MAX\":tempStyle.bottom = currentFrame.absoluteBoundingBox.height - (height + top);break;\r\n        case \"STRETCH\":\r\n          tempStyle.top = top\r\n          tempStyle.bottom = currentFrame.absoluteBoundingBox.height - (height + top)\r\n        ;break;\r\n      }\r\n    }\r\n    else {\r\n      tempStyle.top = top\r\n      tempStyle.left = left\r\n    }\r\n\r\n    if(nodeTree.hasOwnProperty(parent)&&nodeTree[parent].type !== 'FRAME'&&nodeTree[parent].type !== 'GROUP'){\r\n      const parentPos = nodeTree[parent].absoluteBoundingBox\r\n      switch (constraints.horizontal) {\r\n        case \"MIN\":case \"CENTER\":case \"SCALE\":tempStyle.left = tempStyle.left - (parentPos.x - currentFrame.absoluteBoundingBox.x);break;\r\n        case \"MAX\":tempStyle.right = tempStyle.right - parentPos.width - (width + left);break;\r\n        case \"STRETCH\":\r\n          tempStyle.left = tempStyle.left - parentPos.x\r\n          tempStyle.right = tempStyle.right - parentPos.width - (width + left)\r\n        ;break;\r\n      }\r\n      switch (constraints.vertical) {\r\n        case \"MIN\":case \"CENTER\":case \"SCALE\":tempStyle.top = tempStyle.top - (parentPos.y - currentFrame.absoluteBoundingBox.y);break;\r\n        case \"MAX\":tempStyle.bottom = tempStyle.bottom - parentPos.height - (height + top);break;\r\n        case \"STRETCH\":\r\n          tempStyle.top = tempStyle.top - parentPos.y\r\n          tempStyle.bottom = tempStyle.bottom - parentPos.width - (width + left)\r\n        ;break;\r\n      }\r\n    }\r\n    if(nodeTree.hasOwnProperty(node.parentNode)&&nodeTree[node.parentNode].type === 'GROUP'){\r\n      tempStyle.top = 0\r\n      tempStyle.left = 0\r\n    }\r\n    if(name === 'Naho') {\r\n      console.log(nodeTree);\r\n      console.log(node.parentNode);\r\n      console.log(nodeTree[node.parentNode]);\r\n    }\r\n  }\r\n  const conditionBasedVisibility =()=>{\r\n    if(pluginState.pluginConditions.hasOwnProperty(id)) {\r\n      const showMe = Object.keys(pluginState.pluginConditions[id]).every(condition => {\r\n        const isVisible = ReturnVisibility(pluginState,pluginState.pluginConditions[id][condition])\r\n        if(isVisible) return true\r\n        else return false\r\n      })\r\n      if(!showMe)tempStyle.display = \"none\"\r\n    }\r\n  }\r\n\r\n\r\n  const setVisibility = ()=>{\r\n    if(visible!==undefined){\r\n      const setKey = {\r\n        id,attribute:\"visible\",value:visible\r\n      }\r\n      dispatch({type:'SET_ATTRIBUTE',payload:setKey})\r\n      if(!visible)tempStyle.display = \"none\"\r\n    }\r\n\r\n    if(pluginState)conditionBasedVisibility()\r\n    if(nodeStyle)setNodeStyle({...nodeStyle,...tempStyle})\r\n\r\n  }\r\n\r\n  const setChild =()=>{\r\n    const parentNodee = nodeTree[parent]\r\n    const itemSpacing = parentNodee.itemSpacing\r\n    const parentChildren = Object.keys(parentNodee.children)\r\n    const firstChild = parentNodee.order[0] === id\r\n    if(!firstChild&&parentChildren.length>1)tempStyle[parentNodee.layoutMode===\"VERTICAL\"?\"marginTop\":\"marginLeft\"] = itemSpacing\r\n    const flexDirectionIsHorizontal = parentNodee.layoutMode===\"HORIZONTAL\"\r\n      if(flexChild&&node.layoutAlign==='STRETCH')tempStyle[flexDirectionIsHorizontal?'height':'width'] = \"100%\"\r\n      if (flexChild) {\r\n        if(node.layoutGrow===1)tempStyle.flex = 1\r\n        else tempStyle[flexDirectionIsHorizontal?'width':'height'] = absoluteBoundingBox[flexDirectionIsHorizontal?'width':'height']\r\n      }\r\n\r\n  }\r\n\r\n  const setRadius=()=>{\r\n    if(node.hasOwnProperty(\"rectangleCornerRadius\")){\r\n      const radius = node.rectangleCornerRadius.reduce((acc,itm,idx)=>{\r\n        acc = acc + itm+\"px \"\r\n        return acc\r\n      },\"\")\r\n      tempStyle.borderRadius = radius\r\n      tempStyle.overflow = \"hidden\"\r\n    }\r\n      if(node.hasOwnProperty(\"cornerRadius\")){\r\n        tempStyle.borderRadius = node.cornerRadius\r\n        tempStyle.overflow = \"hidden\"\r\n    }\r\n  }\r\n\r\n  const centerStyle = isParent =>{\r\n    if(nodeStyle){\r\n      const centerParent = {...nodeStyle}\r\n      const childStyle = {...nodeStyle}\r\n      delete centerParent.width\r\n      delete centerParent.height\r\n      delete childStyle.height\r\n      delete centerParent.left\r\n      delete centerParent.right\r\n\r\n      const x = node.absoluteBoundingBox.x - currentFrame.absoluteBoundingBox.x\r\n      const isLeft = x <= (currentFrame.absoluteBoundingBox.width - childStyle.width) / 2\r\n\r\n      let calcChildWidth\r\n      if(isLeft){\r\n        calcChildWidth = currentFrame.absoluteBoundingBox.width - (x*2)\r\n      } else {\r\n        const xRight = (currentFrame.absoluteBoundingBox.width - (childStyle.width + childStyle.left))\r\n        calcChildWidth = currentFrame.absoluteBoundingBox.width - (xRight*2)\r\n        childStyle.display = \"flex\"\r\n        childStyle.justifyContent = \"flex-end\"\r\n      }\r\n\r\n      delete childStyle.position\r\n      delete childStyle.left\r\n      delete childStyle.top\r\n      delete childStyle.bottom\r\n      childStyle.width = calcChildWidth\r\n      if(!centerParent.width)delete centerParent.width\r\n      if(!childStyle.width)delete childStyle.width\r\n      return isParent==='parent'?centerParent:childStyle\r\n    } else return {background:'red'}\r\n  }\r\n\r\n  const handleEvent = eventType =>{\r\n    if (pluginState) {\r\n\r\n      if (pluginState.pluginActions.hasOwnProperty(id)) {\r\n        Object.keys(pluginState.pluginActions[id]).forEach(action => {\r\n          if(eventType.indexOf(pluginState.pluginActions[id][action].eventType) !== -1 ){\r\n            dispatch({type:'UPDATE_PLUGIN_STATE',payload:{\r\n              pluginAction:pluginState.pluginActions[id][action],eventType\r\n            }})\r\n          }\r\n        })\r\n        makeClickable(true)\r\n      }\r\n      if(reactions.length)makeClickable(true)\r\n    }\r\n  }\r\n\r\n\r\n  const handleClick = ()=>{\r\n    handleEvent(['Click'])\r\n    if(reactions.length) dispatch({type:'SET_CURRENT_FRAME_ID',payload:reactions[0].action.destinationId})\r\n  }\r\n\r\n  const setNodeActions = ()=>{\r\n    if (pluginState) {\r\n\r\n      let setNode = {...node}\r\n      const { pluginActions,pluginConditions } = pluginState\r\n      if(pluginActions.hasOwnProperty(id))setNode.actions = pluginActions[id]\r\n      if(pluginConditions.hasOwnProperty(id))setNode.conditions = pluginConditions[id]\r\n      dispatch({type:'ADD_CHILD_ELEMENT',payload:setNode})\r\n    }\r\n  }\r\n\r\n\r\n\r\n  const updateVisibility =()=>{\r\n    if (nodeTree&&nodeTree.hasOwnProperty(id)&&nodeTree[id].hasOwnProperty('conditions')) {\r\n      const isVisible = Object\r\n      .keys(nodeTree[id].conditions)\r\n      .every(condition=>{\r\n        if (ReturnVisibility(pluginState,nodeTree[id].conditions[condition])) return true\r\n        else return false\r\n      })\r\n\r\n      let temp = {}\r\n      if(!isVisible)temp.display = 'none'\r\n      else temp.display = flexParent?'flex':'block'\r\n      if(nodeStyle)setNodeStyle({...nodeStyle,...temp})\r\n    }\r\n  }\r\n\r\n  const sortChildren = (a,b)=>{\r\n    const { order } = node\r\n    return order.indexOf(a) - order.indexOf(b)\r\n  }\r\n\r\n\r\n  useEffect(()=>{\r\n    let classes = `${type} ${name.split(' ').join('_')}  ${flexChild?'flexChild':''} ${flexParent?'flexParent':''} ${clickable||transitionNodeID?'clickable':''}`\r\n    if(flexParent) {\r\n      if(node.layoutMode === 'VERTICAL')classes += ' column'\r\n      else classes += ' row'\r\n    }\r\n    setClassNames(classes)\r\n  },[nodeTree])\r\n\r\n  useEffect(()=>{\r\n    if(nodeTree&&parent!==currentFrame.id)setParentNode(nodeTree[parent])\r\n  },[figmaData,nodeTree])\r\n\r\n  useEffect(setNodeActions,[nodeTree,currentFrameID,pluginStateChanges])\r\n  useEffect(()=>{\r\n    if(nodeTree&&Object.keys(nodeTree).length&&absoluteBoundingBox){\r\n      if(parent&&nodeTree.hasOwnProperty(parent)&&nodeTree[parent].layoutMode !== 'NONE')setFlexChild(nodeTree[parent].hasOwnProperty(\"layoutMode\"))\r\n      setRadius()\r\n      if(flexParent)setFlex()\r\n      if(opacity)setOpacity()\r\n      setDimension()\r\n      //if(rotations&&!rotations.hasOwnProperty('noRotations'))setRotate()\r\n      setEffects()\r\n\r\n      if(!flexChild)setPosition()\r\n      else setChild()\r\n      setVisibility()\r\n      setNodeStyle(tempStyle)\r\n    }\r\n  },[figmaData,nodeTree,flexChild])\r\n\r\n\r\n  useEffect(()=>{\r\n    if (nodeTree,pluginStateChanges) setVisibility()\r\n  },[nodeTree,pluginStateChanges])\r\n  useEffect(updateVisibility,[updateVis,nodeTree])\r\n  if(nodeStyle===null)return null\r\n  let renderThis\r\n  switch (type) {\r\n    case \"VECTOR\":\r\n      if(nodeStyle&&vectors&&vectors.hasOwnProperty(id))renderThis = <Vector handleClick={handleClick} style={nodeStyle} node={node}/>\r\n      else return null;break;\r\n    case \"TEXT\":renderThis = <Text handleClick={handleClick} style={nodeStyle} node={node}/>;break;\r\n    case \"ELLIPSE\":renderThis = <Ellipse handleClick={handleClick} style={nodeStyle} node={node}/>;break;\r\n    default: renderThis = (\r\n      <article\r\n        style={nodeStyle}\r\n        onMouseEnter={()=>handleEvent(['MouseEnter','Hover'])}\r\n        onMouseLeave={()=>handleEvent(['MouseLeave','Hover'])}\r\n        onClick={handleClick}\r\n        className={'Element '+ classNames }>\r\n        {(type!==\"TEXT\"&&type!==\"VECTOR\"&&type!==\"BOOLEAN_OPERATION\")&&<Background element={node}/>}\r\n        {(type!==\"TEXT\"&&type!==\"VECTOR\"&&type!==\"BOOLEAN_OPERATION\")&&<Stroke element={node}/>}\r\n        {pluginState&&(pluginState.hasOwnProperty('pluginFields')&&pluginState.pluginFields.hasOwnProperty(id))&&<Field handleClick={handleClick} style={nodeStyle} node={node}/>}\r\n        {node.children&&Object.keys(node.children)\r\n          .sort((a,b)=>sortChildren(a,b))\r\n          .map(key=>{\r\n          const child = node.children[key]\r\n          return (\r\n            <Element\r\n              parent={node.id}\r\n              key={key}\r\n              node={child}/>\r\n          )\r\n        })}\r\n      </article>\r\n    )\r\n\r\n  }\r\n\r\n  if(node.hasOwnProperty('constraints')&&node.constraints.horizontal === \"CENTER\") {\r\n\r\n    return (\r\n      <main\r\n        style={centerStyle(\"parent\")}\r\n        className=\"centerParent\">\r\n        <section\r\n          className=\"childStyle\"\r\n          style={centerStyle(\"child\")}>{renderThis}</section>\r\n      </main>\r\n    )\r\n  } else return renderThis\r\n\r\n\r\n\r\n}\r\n\r\nexport default Element\r\n","import React,{ useContext,useEffect } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport Empty from '../Empty'\r\nimport Element from '../Element'\r\nimport './RenderElements.css'\r\n\r\nconst RenderElements = ()=>{\r\n\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { figmaData,currentPageIDX,currentFrameID,nodeTree,currentPageID } = useContext(PyroStateContext)\r\n  const currentPage = figmaData.children[currentPageIDX]\r\n  const currentFrame = currentPage.children[currentFrameID]\r\n  const parentStyle = {\r\n    //minHeight:currentPage.children[currentFrameID].absoluteBoundingBox.height\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(currentFrameID)dispatch({type:'ADD_CHILD_ELEMENT',payload:currentFrame})\r\n  },[currentFrameID])\r\n  if(!currentFrame)return null\r\n  return (\r\n    <section style={parentStyle} className=\"RenderElements\">\r\n      {currentFrame.hasOwnProperty('children')?Object.keys(currentFrame.children).map(key=>(\r\n        <Element\r\n          key={currentFrame.children[key].id}\r\n          parent={currentFrame.id}\r\n          node={currentFrame.children[key]}/>\r\n      )):<Empty/>}\r\n    </section>\r\n  )\r\n}\r\nexport default RenderElements\r\n","import React,{ useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport RenderElements from '../RenderElements'\r\nimport Background from '../Background'\r\nimport Stroke from '../Stroke'\r\nimport './Frame.css'\r\n\r\nconst Frame = ()=>{\r\n  const { figmaData,currentPageIDX,currentFrameID,protoHeight } = useContext(PyroStateContext)\r\n  const currentPage = figmaData.children[currentPageIDX]\r\n  const parentStyle = {\r\n    //overflowY: protoHeight < currentPage.children[currentFrameID].absoluteBoundingBox.height ? \"scroll\":null\r\n  }\r\n\r\n  return (\r\n    <section style={parentStyle} className=\"Frame\">\r\n      {(currentPage.children.hasOwnProperty(currentFrameID)&&currentPage.children[currentFrameID].hasOwnProperty('background')&&currentPage.children[currentFrameID].background.length>0)&&<Background element={currentPage.children[currentFrameID]}/>}\r\n      {(currentPage.children.hasOwnProperty(currentFrameID)&&currentPage.children[currentFrameID].hasOwnProperty('strokes')&&currentPage.children[currentFrameID].strokes.length>0)&&<Stroke element={currentPage.children[currentFrameID]}/>}\r\n      <RenderElements/>\r\n    </section>\r\n  )\r\n}\r\nexport default Frame\r\n","import React,{ useContext,useEffect } from 'react'\r\nimport { Resizable } from 'react-resizable'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport Frame from '../Frame'\r\nimport Empty from '../Empty'\r\nimport './Frames.css'\r\nimport './../../resize.css'\r\n\r\nconst Frames = ()=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { currentBreakpoint,breakPoints,nodeTree,figmaData,currentPageIDX,currentFrameID,isMobile,protoWidth,protoHeight,smoov,minWidth, minHeight } = useContext(PyroStateContext)\r\n  const currentPage = figmaData.children[currentPageIDX]\r\n  const handleResize = (e,{size}) =>{\r\n    const { width,height } = size\r\n    dispatch({type:'SET_DIRECTION',payload:0>=protoWidth-width})\r\n    dispatch({type:'SET_WIDTH',payload:width})\r\n    dispatch({type:'SET_HEIGHT',payload:height})\r\n  }\r\n\r\n\r\n  const checkRWD = ()=>{\r\n    const pages = figmaData.children[currentPageIDX]\r\n    if(pages.hasOwnProperty('children')){\r\n      Object.keys(pages.children).forEach((key,idx) => {\r\n        const frame = pages.children[key]\r\n        if (frame.name.indexOf('|')!==-1) {\r\n          frame[frame.name.split('|')[0].split(' ').join('**').toLowerCase()] = frame.absoluteBoundingBox.width\r\n          frame.index = idx\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  const updateBreakPoint = () =>{\r\n    if(breakPoints&&breakPoints.length){\r\n      const currentId = breakPoints.indexOf(breakPoints[currentBreakpoint])\r\n      if(currentFrameID!==currentId){\r\n        dispatch({type:'SET_CURRENT_FRAME_ID',payload:breakPoints[currentBreakpoint].id})\r\n        dispatch({type:'SET_CURRENT_FRAME_IDX',payload:currentId})\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(updateBreakPoint,[currentBreakpoint,breakPoints])\r\n\r\n  useEffect(checkRWD,[figmaData,currentPageIDX])\r\n  if(!figmaData.children[currentPageIDX].hasOwnProperty('children'))return <Empty/>\r\n  return (\r\n    <Resizable\r\n      maxConstraints={[window.innerWidth, window.innerHeight - 34]}\r\n      minConstraints={[minWidth, minHeight]}\r\n      onResize={handleResize}\r\n      width={protoWidth}\r\n      height={protoHeight}>\r\n      <main\r\n        style={{\"width\":protoWidth,\"height\":protoHeight}}\r\n        className={`Frames box ${isMobile?'mobile':'desktop'} ${smoov?'smoov':''}`}>\r\n        <p className=\"pageName\">{currentPage.name} &nbsp;>&nbsp; {currentFrameID&&currentPage.children[currentFrameID].name}</p>\r\n        <Frame/>\r\n      </main>\r\n    </Resizable>\r\n  )\r\n}\r\nexport default Frames\r\n","import { useContext,useEffect,useState } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport ProtoActions from '../ProtoActions'\r\nimport Frames from '../Frames'\r\nimport Loading from '../Loading'\r\n\r\nconst Prototype = ()=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { direction,currentBreakpoint,breakPoints,rwd,currentFrameID,protoWidth,figmaData,figmaFile,loading,currentPageIDX,currentPageID,selection,nodeTree } = useContext(PyroStateContext)\r\n  const basicGrey = \"rgba(229.00000154972076,229.00000154972076,229.00000154972076,1)\"\r\n  const [ bg,setBG ] = useState(null)\r\n\r\n  const pageIdx = ()=>{\r\n    if (currentPageID&&figmaData) {\r\n      figmaData.children.every((page,i)=>{\r\n        if(page.id === currentPageID){\r\n          dispatch({type:'RESET_CURRENTPAGE',payload:i})\r\n          return false\r\n        } else return true\r\n      })\r\n    }\r\n  }\r\n\r\n  const getBreakPoints = ()=>{\r\n    const currWidth = Math.round(protoWidth)\r\n    if(nodeTree){\r\n      const frame = figmaData.children[currentPageIDX].children[currentFrameID]\r\n      const key = Object.keys(frame)\r\n      .filter(key=>key.indexOf(\"**\")!== -1)\r\n      const setPoints = Object.keys(figmaData.children[currentPageIDX].children)\r\n      .filter(childKey=>figmaData.children[currentPageIDX].children[childKey].hasOwnProperty(key[0]))\r\n      .map(childKey=>{\r\n        const currFrame = figmaData.children[currentPageIDX].children[childKey]\r\n        return {id:currFrame.id,name:currFrame.name,breakPoint:currFrame[key[0]]}\r\n      }).sort((a,b)=>a.breakPoint - b.breakPoint)\r\n\r\n\r\n      dispatch({type:'SET_BREAKPOINTS',payload:setPoints})\r\n    }\r\n  }\r\n\r\n  const handleResize =()=>{\r\n    if (breakPoints&&breakPoints.length) {\r\n      const w = Math.round(protoWidth)\r\n      if(direction){\r\n        if(currentBreakpoint+1<breakPoints.length&&w>breakPoints[currentBreakpoint+1].breakPoint){\r\n          dispatch({type:'SET_CURRENT_BPOINT',payload:currentBreakpoint+1})\r\n        }\r\n      } else if(w<breakPoints[currentBreakpoint].breakPoint&&currentBreakpoint-1>=0){\r\n        dispatch({type:'SET_CURRENT_BPOINT',payload:currentBreakpoint-1})\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(pageIdx,[currentPageID,selection])\r\n  useEffect(handleResize,[protoWidth])\r\n  useEffect(getBreakPoints,[nodeTree])\r\n\r\n  useEffect(()=>{\r\n    if (figmaData&&figmaData.hasOwnProperty('document')) {\r\n      const background = RenderedColor(figmaData.children[currentPageIDX].backgroundColor)\r\n      if(background !== basicGrey)setBG({background})\r\n      else setBG(null)\r\n    }\r\n  },[figmaData,currentPageIDX])\r\n  return (\r\n    <main className=\"FigmaProto\">\r\n      <ProtoActions/>\r\n      <section style={bg} className=\"Prototype\">\r\n        {figmaData&&!loading?<Frames/>:<Loading/>}\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Prototype\r\n","import React from 'react'\r\nimport './NoPyro.css'\r\n\r\nconst NoPyro = ()=>(\r\n  <main className=\"NoPyro\">\r\n    NoPyro\r\n  </main>\r\n)\r\nexport default NoPyro\r\n","import { useContext,useEffect,useState } from 'react'\r\nimport { firestore } from './Utils/firebase'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\r\nimport PyroStateContext from './context/PyroStateContext'\r\nimport PyroDispatchContext from './context/PyroDispatchContext'\r\n\r\nimport Prototype from './components/Prototype'\r\nimport NoPyro from './components/NoPyro'\r\nimport './bolt_fonts.css'\r\nimport './assets/iconfont/harmonyicons.css'\r\nimport './App.css'\r\n\r\nconst FIGMA_CLIENT_ID = process.env.REACT_APP_FIGMA_CLIENT_ID\r\nconst FIGMA_SECRET = process.env.REACT_APP_FIGMA_SECRET\r\nconst URL_CB = process.env.REACT_APP_URL_CB\r\nconst FIGMA_SESSION = process.env.REACT_APP_FIGMA_SESSION\r\n\r\nconst App = ()=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { pristine,pluginState,noPyroProto,figmaData,figmaFile,loading } = useContext(PyroStateContext)\r\n  const db = firestore.collection('figma-files').doc(figmaFile)\r\n  const fileDB = db.collection(\"fileData\")\r\n  const pluginVariablesDB = fileDB.doc(\"pluginUIData\").collection(\"variables\")\r\n  const pluginActionsDB = fileDB.doc(\"pluginUIData\").collection(\"nodeActions\")\r\n  const pluginConditionsDB = fileDB.doc(\"pluginUIData\").collection(\"nodeConditions\")\r\n  const pluginFieldsDB = fileDB.doc(\"pluginUIData\").collection(\"nodeFields\")\r\n  const pluginTextsDB = fileDB.doc(\"pluginUIData\").collection(\"nodeTexts\")\r\n  const [pluginVariables] = useCollectionData(pluginVariablesDB,{idField:'id'})\r\n  const [pluginActions] = useCollectionData(pluginActionsDB,{idField:'id'})\r\n  const [pluginConditions] = useCollectionData(pluginConditionsDB,{idField:'id'})\r\n  const [pluginFields] = useCollectionData(pluginFieldsDB,{idField:'id'})\r\n  const [pluginTexts] = useCollectionData(pluginTextsDB,{idField:'id'})\r\n  const [vectorDB] = useCollectionData(fileDB,{idField:'id'})\r\n\r\n  const waitForPyroState = ()=>{\r\n    if(pristine){\r\n      dispatch({type:'NOT_PRISTINE'})\r\n      return\r\n    }\r\n    if(!pluginConditions)dispatch({type:'RMV_LOADING'})\r\n\r\n  }\r\n\r\n  // const getSelection =()=>{\r\n  //   if(selection&&selection.length)dispatch({type:'SET_SELECTION',payload:selection[0]})\r\n  // }\r\n\r\n  const getPluginState = ()=>{\r\n    if(pluginVariables&&pluginActions&&pluginConditions&&pluginFields&&pluginTexts){\r\n\r\n      let pluginVariablesState = pluginVariables.reduce((acc,variable)=>{\r\n        acc[variable.id] = Object.entries(variable.var)[0][1]\r\n        return acc\r\n      },{})\r\n      let pluginFieldsState = pluginFields.reduce((acc,node)=>{\r\n        acc[node.id] = node\r\n        return acc\r\n      },{})\r\n      let pluginTextsState = pluginTexts.reduce((acc,node)=>{\r\n        acc[node.id] = node\r\n        return acc\r\n      },{})\r\n      let pluginActionsState = pluginActions.reduce((acc,node)=>{\r\n        pluginActionsDB.doc(node.id).collection('actions').get()\r\n        .then(snap=>{\r\n          const actions = {}\r\n          snap.forEach(doc => actions[doc.id] = doc.data())\r\n          acc[node.id] = actions\r\n        })\r\n        return acc\r\n      },{})\r\n\r\n      let pluginConditionsState = pluginConditions.reduce((acc,node)=>{\r\n        pluginConditionsDB.doc(node.id).collection('conditions').get()\r\n        .then(snap=>{\r\n          const conditions = {}\r\n          snap.forEach(doc => conditions[doc.id] = doc.data())\r\n          acc[node.id] = conditions\r\n          const nodeID = node.id\r\n          dispatch({type:'ADD_CONDITION',payload:{nodeID,conditions}})\r\n        })\r\n        return acc\r\n      },{})\r\n      const plugState = {pluginVariables:pluginVariablesState,pluginActions:pluginActionsState,pluginConditions:pluginConditionsState,pluginFields:pluginFieldsState,pluginTexts:pluginTextsState}\r\n      dispatch({type:'SET_PLUGIN_STATE',payload:plugState})\r\n    }\r\n  }\r\n\r\n  useEffect(waitForPyroState,[pristine])\r\n\r\n  useEffect(getPluginState,[pluginVariables,pluginActions,pluginConditions,pluginFields,pluginTexts])\r\n  if(noPyroProto) return <NoPyro/>\r\n  return <Prototype/>\r\n}\r\n\r\nexport default App\r\n","import { useReducer,useEffect } from 'react'\r\nimport { firestore } from '../../Utils/firebase'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport PyroReducer, { initialPyroState } from '../../reducers/PyroReducer'\r\nimport pyro from '../../assets/images/pyro_white.svg'\r\nimport useAuth from '../../hooks/useAuth'\r\nimport Login from '../Login'\r\nimport UserNotAllowed from '../UserNotAllowed'\r\nimport User from '../User'\r\nimport SignOut from '../SignOut'\r\nimport SignIn from '../SignIn'\r\nimport Pile from '../Pile'\r\nimport App from '../../App'\r\n\r\nconst InitFigma = ()=>{\r\n  const user = useAuth()\r\n  const fileKey = window.location.href.split('/figma/?key=')[1]\r\n  const [ state, dispatch ] = useReducer(PyroReducer, initialPyroState)\r\n  const { requestSent,userData,authData,userIsAllowed,figmaFile } = state\r\n  const db = firestore.collection('figma-files').doc(fileKey)\r\n\r\n  const updateUser = ()=>{\r\n    if(user){\r\n      const { photoURL,email,displayName } = user\r\n      dispatch({type:'SET_USER',payload:{ photoURL,email,displayName }})\r\n    } else dispatch({type:'SET_USER',payload:null})\r\n  }\r\n\r\n  const authorizeUser = ()=>{\r\n    let isAuthorised = false\r\n    if (user&&authData&&userData) {\r\n      const { currentOrg,myEmail,orgDomain,useOrg,users } = authData\r\n      const { displayName,email,photoURL } = userData\r\n      const imTheOwner = myEmail===email\r\n      const isMyGuest = users.length&&users.indexOf(email)!==-1\r\n      const isInMyOrg = useOrg && email.indexOf(currentOrg)!== -1\r\n      if (isInMyOrg) isAuthorised = true\r\n      if(isMyGuest) isAuthorised = true\r\n      if(imTheOwner)isAuthorised = true\r\n    }\r\n    return isAuthorised\r\n\r\n  }\r\n\r\n  const getData = () =>{\r\n    db.get()\r\n    .then(doc =>{\r\n      if (doc.exists) {\r\n        const {authData,pageData} = doc.data()\r\n        dispatch({type:'UPDATE_FILE_DATA_FROM_FIGMA',payload:{authData,pageData}})\r\n        dispatch({type:'SET_CURRENT_FRAME_ID',payload:pageData.children[0].prototypeStartNodeID})\r\n      } else dispatch({type:'NO_PROTO'})\r\n    }).catch(error => console.error(error))\r\n    updateUser()\r\n    authorizeUser()\r\n  }\r\n\r\n\r\n  useEffect(getData,[])\r\n  useEffect(()=>{\r\n    updateUser()\r\n    if(userIsAllowed!==authorizeUser())dispatch({type:'AUTHORISE_USER',payload:authorizeUser})\r\n  },[authorizeUser(),user])\r\n  useEffect(()=>{\r\n    dispatch({type:'SET_FILEKEY',payload:fileKey})\r\n  },[])\r\n  if(!figmaFile)return <p>no file</p>\r\n  return (\r\n    <PyroDispatchContext.Provider value={dispatch}>\r\n      <PyroStateContext.Provider value={state}>\r\n        {user&&authorizeUser()?<App/>:(\r\n          <main className=\"SignIn\">\r\n            <section>\r\n              <img src={pyro} height=\"27\" alt=\"pyro\"/>\r\n              {userData&&<User/>}\r\n            </section>\r\n            {user&&!authorizeUser()?<UserNotAllowed/>:<Login/>}\r\n            {requestSent&&<Pile msg=\"Request sent succesfully\"/>}\r\n            <small>*Better design coming up!</small>\r\n          </main>\r\n        )}\r\n\r\n      </PyroStateContext.Provider>\r\n    </PyroDispatchContext.Provider>\r\n  )\r\n}\r\n\r\nexport default InitFigma\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport InitFigma from './components/InitFigma'\r\nReactDOM.render(<InitFigma />, document.getElementById('figma_pyro'))\r\n"],"sourceRoot":""}