{"version":3,"sources":["Utils/firebase.js","context/PyroStateContext.js","context/PyroDispatchContext.js","reducers/PyroReducer.js","assets/images/pyro_white.svg","hooks/useAuth.js","components/Loading/index.js","components/SignIn.js","components/Login/index.js","components/SignOut.js","components/UserNotAllowed/index.js","components/User/index.js","components/Pile/index.js","Utils/RenderedColor.js","components/InputDimensions/index.js","assets/images/mobile.svg","assets/images/tablet.svg","assets/images/desktop.svg","components/Dimensions/index.js","components/ProtoActions/index.js","components/Empty/index.js","Utils/ReturnVisibility.js","components/Gradients/index.js","components/SolidBG/index.js","hooks/useAssets.js","components/ImageBG/index.js","components/Background/index.js","components/StrokeGradients/index.js","components/StrokeSolidBG/index.js","components/Stroke/index.js","components/Vector/index.js","components/Text/index.js","components/Field/index.js","components/Ellipse/index.js","components/Element/index.js","components/RenderElements/index.js","components/Frame/index.js","components/Frames/index.js","components/Prototype/index.js","components/NoPyro/index.js","App.js","components/InitFigma/index.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","firestore","PyroStateContext","createContext","PyroDispatchContext","initialPyroState","figmaFile","authData","loading","isMobile","figmaData","currentFrameIDX","currentFrameID","currentPageIDX","currentPageID","protoWidth","protoHeight","tabletWidth","tabletHeight","minWidth","minHeight","smoov","onBoarding","fileImages","nodeTree","selection","vectors","me","breakPoints","currentBreakpoint","direction","email","rotations","pluginState","pluginStateChanges","hoverEnter","firstFrame","updateVis","noPyroProto","userIsAllowed","pristine","userData","requestSent","nodeTreeLength","token","PyroReducer","state","action","type","NODE_LENGTH","payload","HIDE_REQUEST","SHOW_REQUEST","AUTHORISE_USER","SET_USER","NOT_PRISTINE","NO_PROTO","SET_FILEKEY","UPDATE_FIELD_VALUE","pluginVariables","variable","val","UPDATE_PLUGIN_STATE","update_current","String","pluginAction","targetVariable","id","update_target","targetValue","eventType","indexOf","actionType","ADD_CONDITION","newCondition","nodeID","conditions","pluginConditions","SET_PLUGIN_STATE","SET_DIRECTION","SET_CURRENT_BPOINT","SET_BREAKPOINTS","SET_SELECTION","currentPage","SET_ROTATES","SET_VECTORS","SET_EMAIL","SET_ONBARDING","SET_ATTRIBUTE","hasOwnProperty","attribute","value","ADD_CHILD_ELEMENT","startNodeTree","GET_ME","GET_IMAGES","REMOVE_SMOOV","SET_TABLET","SET_DESKTOP","window","innerWidth","innerHeight","SET_MOBILE","SET_WIDTH","SET_HEIGHT","SET_CURRENT_FRAME_ID","SET_CURRENT_FRAME_IDX","undefined","RESET_CURRENTPAGE","SET_CURRENT_PAGE_IDX","RMV_LOADING","LOADING","TOKEN","UPDATE_FILE_DATA_FROM_FIGMA","pageData","Error","useAuth","useState","user","setUser","useEffect","onAuthStateChanged","Loading","className","SignIn","onClick","provider","GoogleAuthProvider","signInWithPopup","Login","showUp","setShowUp","unSub","setTimeout","clearTimeout","SignOut","css","signOut","UserNotAllowed","dispatch","useContext","displayName","console","log","User","photoURL","src","width","alt","Pile","msg","floatToRGB","channel","RenderedColor","color","r","g","b","a","alpha","InputDimensions","setInputDimensions","e","isWidth","isNaN","Number","target","checkMax","disabled","onFocus","select","onChange","onBlur","Math","round","Dimensions","setDimensions","dimensions","size","mobile","desktop","tablet","ProtoActions","pyro","height","name","children","Empty","ReturnVisibility","condition","isC2","condition2","toLowerCase","nbC1","condition1","nbC2","c1","thisString","operator","show","Gradients","bg","gradType","canvasRef","useRef","opacity","blendMode","gradientStops","gradientTransform","startGradient","start","endGradient","end","c","current","getContext","clearRect","grad","x0","x","y0","y","x1","y1","gradientWith","sqrt","createLinearGradient","createRadialGradient","forEach","stop","idx","position","addColorStop","fillStyle","fillRect","style","mixBlendMode","split","join","ref","SolidBG","background","useAssets","assets","setAssets","collection","doc","onSnapshot","snap","dbAssets","docs","reduce","acc","data","ImageBG","constraints","srcUrl","setSrcUrl","storageImages","imageHash","downloadURL","Object","keys","length","Background","element","makeBackground","key","visible","map","fills","StrokeGradients","str","strokeWeight","gradientHandlePositions","strokeStyle","lineWidth","strokeRect","StrokeSolidBG","borderRadius","rectangleCornerRadius","itm","cornerRadius","border","Stroke","strokes","makeStroke","Vector","handleClick","node","transitionNodeID","parentNode","vectorPaths","vectorStyle","setVectorStyle","isLoaded","setLoaded","SVGStyle","setSVGStyle","pathStyle","setPathStyle","tempStyle","tempSVG","path","stroke","strokeWidth","top","left","right","bottom","xmlns","viewBox","strokeLinecap","d","Text","posStyle","characters","textAlignHorizontal","textAlignVertical","textAutoResize","textCase","textDecoration","fontName","fontSize","layoutAlign","layoutGrow","letterSpacing","lineHeight","listSpacing","textStyles","setTextStyles","txtStyles","textAlign","textTransform","fontStyle","fontFamily","family","justif","align","display","margin","justifyContent","alignItems","pluginTexts","temp","showMe","every","sumStyles","varID","Field","pluginFields","placeHolder","placeholder","Ellipse","Element","renderThis","parent","currentFrame","effects","absoluteBoundingBox","layoutMode","reactions","setParentNode","nodeStyle","setNodeStyle","flexChild","setFlexChild","clickable","makeClickable","classNames","setClassNames","flexParent","setAxis","priority","axis","setVisibility","centerStyle","isParent","centerParent","childStyle","calcChildWidth","xRight","handleEvent","pluginActions","destinationId","classes","setNode","actions","radius","overflow","setRadius","primaryAxisAlignItems","counterAxisAlignItems","flexDirection","paddingTop","paddingRight","paddingBottom","paddingLeft","padding","boxSizing","setFlex","toFixed","horizontal","vertical","setDimension","fx","fxType","offset","boxShadow","parentNodee","itemSpacing","parentChildren","order","flexDirectionIsHorizontal","flex","setChild","parentPos","setPosition","isVisible","booleanChildren","childKey","pos","onMouseEnter","onMouseLeave","sort","sortChildren","child","RenderElements","Frame","Frames","currentId","pages","frame","index","maxConstraints","minConstraints","onResize","Prototype","rwd","setBG","page","i","w","breakPoint","filter","setPoints","currFrame","backgroundColor","NoPyro","App","fileDB","pluginVariablesDB","pluginActionsDB","pluginConditionsDB","pluginFieldsDB","pluginTextsDB","useCollectionData","idField","pluginVariablesState","entries","var","pluginFieldsState","pluginTextsState","pluginActionsState","get","then","pluginConditionsState","InitFigma","fileKey","location","href","useReducer","db","updateUser","authorizeUser","isAuthorised","currentOrg","myEmail","useOrg","orgDomain","users","imTheOwner","isMyGuest","exists","catch","error","prototypeStartNodeID","elementsCount","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7dd04769.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\nimport 'firebase/firestore'\r\nimport 'firebase/auth'\r\n\r\nconst FireBaseInit = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: \"pyro-intuit.firebaseapp.com\",\r\n  databaseURL: \"https://pyro-intuit.firebaseio.com\",\r\n  projectId: \"pyro-intuit\",\r\n  storageBucket: \"pyro-intuit.appspot.com\",\r\n  messagingSenderId: \"657829873421\",\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID\r\n}\r\n\r\n\r\nfirebase.initializeApp(FireBaseInit)\r\nconst auth = firebase.auth()\r\nconst firestore = firebase.firestore()\r\nexport { firestore,auth }\r\n\r\nexport default firebase\r\n","import { createContext } from 'react'\r\nconst PyroStateContext = createContext()\r\nexport default PyroStateContext\r\n","import { createContext } from 'react'\r\nconst PyroDispatchContext = createContext()\r\nexport default PyroDispatchContext\r\n","let initialPyroState = {\r\n  //figmaFile:\"91MpGRzYJyF8ZruHDpUC6r\",\r\n  //figmaFile:\"cZk5K4u4XGN22bNIsEcojq\",\r\n  figmaFile:null,\r\n  authData:null,\r\n  loading:true,\r\n  isMobile:true,\r\n  figmaData:null,\r\n  currentFrameIDX:0,\r\n  currentFrameID:null,\r\n  currentPageIDX:0,\r\n  currentPageID:null,\r\n  protoWidth:375,\r\n  protoHeight:812,\r\n  tabletWidth:1024,\r\n  tabletHeight:728,\r\n  minWidth:324,\r\n  minHeight:394,\r\n  smoov:false,\r\n  onBoarding:0,\r\n  fileImages:null,\r\n  nodeTree:null,\r\n  selection:null,\r\n  vectors:null,\r\n  me:null,\r\n  breakPoints:null,\r\n  currentBreakpoint:0,\r\n  direction:false,\r\n  email:null,\r\n  rotations:null,\r\n  pluginState:null,\r\n  pluginStateChanges:false,\r\n  hoverEnter:null,\r\n  firstFrame:null,\r\n  updateVis:false,\r\n  noPyroProto:false,\r\n  userIsAllowed:false,\r\n  pristine:true,\r\n  userData:null,\r\n  requestSent:false,\r\n  nodeTreeLength:0,\r\n  token:null\r\n}\r\nconst PyroReducer = (state, action) => {\r\n  switch (action.type) {\r\n\r\n    case 'NODE_LENGTH':\r\n      let NODE_LENGTH = {...state}\r\n      NODE_LENGTH.nodeTreeLength = action.payload\r\n    return NODE_LENGTH;\r\n\r\n    case 'HIDE_REQUEST':\r\n      let HIDE_REQUEST = {...state}\r\n      HIDE_REQUEST.requestSent = false\r\n    return HIDE_REQUEST;\r\n\r\n    case 'SHOW_REQUEST':\r\n      let SHOW_REQUEST = {...state}\r\n      SHOW_REQUEST.requestSent = true\r\n    return SHOW_REQUEST;\r\n\r\n    case 'AUTHORISE_USER':\r\n      let AUTHORISE_USER = {...state}\r\n      AUTHORISE_USER.userIsAllowed = action.payload\r\n    return AUTHORISE_USER;\r\n\r\n    case 'SET_USER':\r\n      let SET_USER = {...state}\r\n      SET_USER.userData = action.payload\r\n    return SET_USER;\r\n\r\n    case 'NOT_PRISTINE':\r\n      let NOT_PRISTINE = {...state}\r\n      NOT_PRISTINE.pristine = false\r\n    return NOT_PRISTINE;\r\n\r\n    case 'NO_PROTO':\r\n      let NO_PROTO = {...state}\r\n      NO_PROTO.noPyroProto = true\r\n    return NO_PROTO;\r\n\r\n    case 'SET_FILEKEY':\r\n      let SET_FILEKEY = {...state}\r\n      SET_FILEKEY.figmaFile= action.payload\r\n    return SET_FILEKEY;\r\n\r\n    case 'UPDATE_FIELD_VALUE':\r\n      let UPDATE_FIELD_VALUE = {...state}\r\n      UPDATE_FIELD_VALUE.pluginState.pluginVariables[action.payload.variable] = action.payload.val\r\n      UPDATE_FIELD_VALUE.updateVis = !UPDATE_FIELD_VALUE.updateVis\r\n    return UPDATE_FIELD_VALUE;\r\n\r\n    case 'UPDATE_PLUGIN_STATE':\r\n      let UPDATE_PLUGIN_STATE = {...state}\r\n      const update_current = String(UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id])\r\n      const update_target = action.payload.pluginAction.targetVariable.targetValue\r\n      if(action.payload.eventType.indexOf('MouseEnter') !== -1) UPDATE_PLUGIN_STATE.hoverEnter = update_current\r\n\r\n      let originalVal =  UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id]\r\n      if (action.payload.pluginAction.actionType === 'becomes'&&(update_current!==update_target)) {\r\n        UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id] = action.payload.pluginAction.targetVariable.targetValue\r\n      }\r\n\r\n      if (action.payload.pluginAction.actionType === 'toggles') {\r\n        if(String(UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id])==='true'||\r\n          String(UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id])==='false'){\r\n            UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id] = !UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id]\r\n          }\r\n      }\r\n\r\n\r\n      if(action.payload.eventType.indexOf('MouseLeave') !== -1){\r\n        UPDATE_PLUGIN_STATE.pluginState.pluginVariables[action.payload.pluginAction.targetVariable.id] = UPDATE_PLUGIN_STATE.hoverEnter\r\n        UPDATE_PLUGIN_STATE.hoverEnter = null\r\n      }\r\n\r\n      UPDATE_PLUGIN_STATE.updateVis = !UPDATE_PLUGIN_STATE.updateVis\r\n    return UPDATE_PLUGIN_STATE;\r\n\r\n    case 'ADD_CONDITION':\r\n      let ADD_CONDITION = {...state}\r\n      if(ADD_CONDITION.pluginState === null) {\r\n        let newCondition = {}\r\n        newCondition['pluginConditions'][action.payload.nodeID] = action.payload.conditions\r\n        ADD_CONDITION.pluginState = newCondition\r\n      } else ADD_CONDITION.pluginState.pluginConditions[action.payload.nodeID] = action.payload.conditions\r\n      ADD_CONDITION.pluginStateChanges = !ADD_CONDITION.pluginStateChanges\r\n      ADD_CONDITION.loading = false\r\n    return ADD_CONDITION;\r\n\r\n    case 'SET_PLUGIN_STATE':\r\n      let SET_PLUGIN_STATE = {...state}\r\n      SET_PLUGIN_STATE.pluginStateChanges = !SET_PLUGIN_STATE.pluginStateChanges\r\n      SET_PLUGIN_STATE.pluginState = action.payload\r\n    return SET_PLUGIN_STATE;\r\n\r\n    case 'SET_DIRECTION':\r\n      let SET_DIRECTION = {...state}\r\n      SET_DIRECTION.direction = action.payload\r\n    return SET_DIRECTION;\r\n\r\n    case 'SET_CURRENT_BPOINT':\r\n      let SET_CURRENT_BPOINT = {...state}\r\n      SET_CURRENT_BPOINT.currentBreakpoint = action.payload\r\n    return SET_CURRENT_BPOINT;\r\n\r\n    case 'SET_BREAKPOINTS':\r\n      let SET_BREAKPOINTS = {...state}\r\n      SET_BREAKPOINTS.breakPoints = action.payload\r\n    return SET_BREAKPOINTS;\r\n\r\n    case 'SET_SELECTION':\r\n      let SET_SELECTION = {...state}\r\n      //console.log(SET_SELECTION.figmaData.children[SET_SELECTION.currentPageIDX].children[SET_SELECTION.currentFrameIDX]);\r\n      SET_SELECTION.currentPageID = action.payload.currentPage.id\r\n      SET_SELECTION.selection = action.payload.selection\r\n    return SET_SELECTION;\r\n\r\n    case 'SET_ROTATES':\r\n      let SET_ROTATES = {...state}\r\n      SET_ROTATES.rotations = action.payload\r\n    return SET_ROTATES;\r\n\r\n    case 'SET_VECTORS':\r\n      let SET_VECTORS = {...state}\r\n      SET_VECTORS.vectors = action.payload\r\n    return SET_VECTORS;\r\n\r\n    case 'SET_EMAIL':\r\n      let SET_EMAIL = {...state}\r\n      SET_EMAIL.email = action.payload\r\n    return SET_EMAIL;\r\n\r\n    case 'SET_ONBARDING':\r\n      let SET_ONBARDING = {...state}\r\n      SET_ONBARDING.onBoarding = action.payload\r\n    return SET_ONBARDING;\r\n\r\n    case 'SET_ATTRIBUTE':\r\n      let SET_ATTRIBUTE = {...state}\r\n      if(SET_ATTRIBUTE.nodeTree.hasOwnProperty(action.payload.id)){\r\n        SET_ATTRIBUTE.nodeTree[action.payload.id][action.payload.attribute] = action.payload.value\r\n      }\r\n    return SET_ATTRIBUTE;\r\n\r\n    case 'ADD_CHILD_ELEMENT':\r\n      let ADD_CHILD_ELEMENT = {...state}\r\n      let startNodeTree = {}\r\n      if(ADD_CHILD_ELEMENT.nodeTree === null){\r\n        startNodeTree[action.payload.id] = action.payload\r\n        ADD_CHILD_ELEMENT.nodeTree = startNodeTree\r\n      } else ADD_CHILD_ELEMENT.nodeTree[action.payload.id] = action.payload\r\n\r\n    return ADD_CHILD_ELEMENT;\r\n\r\n    case 'GET_ME':\r\n      let GET_ME = {...state}\r\n      GET_ME.me = action.payload\r\n    return GET_ME;\r\n\r\n    case 'GET_IMAGES':\r\n      let GET_IMAGES = {...state}\r\n      GET_IMAGES.fileImages = action.payload\r\n    return GET_IMAGES;\r\n\r\n    case 'REMOVE_SMOOV':\r\n      let REMOVE_SMOOV = {...state}\r\n      REMOVE_SMOOV.smoov = false\r\n    return REMOVE_SMOOV;\r\n\r\n    case 'SET_TABLET':\r\n      let SET_TABLET = {...state}\r\n      SET_TABLET.smoov = true\r\n      SET_TABLET.protoWidth = SET_TABLET.tabletWidth\r\n      SET_TABLET.protoHeight = SET_TABLET.tabletHeight\r\n    return SET_TABLET;\r\n\r\n    case 'SET_DESKTOP':\r\n      let SET_DESKTOP = {...state}\r\n      SET_DESKTOP.smoov = true\r\n      SET_DESKTOP.protoWidth = window.innerWidth\r\n      SET_DESKTOP.protoHeight = window.innerHeight - 34\r\n    return SET_DESKTOP;\r\n\r\n    case 'SET_MOBILE':\r\n      let SET_MOBILE = {...state}\r\n      SET_MOBILE.smoov = true\r\n      SET_MOBILE.protoWidth = 375\r\n      SET_MOBILE.protoHeight = 812\r\n    return SET_MOBILE;\r\n\r\n    case 'SET_WIDTH':\r\n      let SET_WIDTH = {...state}\r\n      SET_WIDTH.protoWidth = action.payload\r\n    return SET_WIDTH;\r\n\r\n    case 'SET_HEIGHT':\r\n      let SET_HEIGHT = {...state}\r\n      SET_HEIGHT.protoHeight = action.payload\r\n    return SET_HEIGHT;\r\n\r\n    case 'SET_CURRENT_FRAME_ID':\r\n      let SET_CURRENT_FRAME_ID = {...state}\r\n      SET_CURRENT_FRAME_ID.currentFrameID = action.payload\r\n    return SET_CURRENT_FRAME_ID;\r\n\r\n    case 'SET_CURRENT_FRAME_IDX':\r\n      let SET_CURRENT_FRAME_IDX = {...state}\r\n      if(action.payload!== undefined)SET_CURRENT_FRAME_IDX.currentFrameIDX = action.payload\r\n    return SET_CURRENT_FRAME_IDX;\r\n\r\n    case 'RESET_CURRENTPAGE':\r\n      let RESET_CURRENTPAGE = {...state}\r\n      RESET_CURRENTPAGE.nodeTree = null\r\n      RESET_CURRENTPAGE.currentPageIDX = action.payload\r\n    return RESET_CURRENTPAGE;\r\n\r\n    case 'SET_CURRENT_PAGE_IDX':\r\n      let SET_CURRENT_PAGE_IDX = {...state}\r\n      SET_CURRENT_PAGE_IDX.currentPageIDX = action.payload\r\n    return SET_CURRENT_PAGE_IDX;\r\n\r\n    case 'RMV_LOADING':\r\n      let RMV_LOADING = {...state}\r\n      RMV_LOADING.loading = false\r\n    return RMV_LOADING;\r\n\r\n    case 'LOADING':\r\n      let LOADING = {...state}\r\n      LOADING.loading = true\r\n    return LOADING;\r\n\r\n    case 'TOKEN':\r\n      let TOKEN = {...state}\r\n      TOKEN.token = action.payload\r\n    return TOKEN;\r\n\r\n    case 'UPDATE_FILE_DATA_FROM_FIGMA':\r\n      let UPDATE_FILE_DATA_FROM_FIGMA = {...state}\r\n      UPDATE_FILE_DATA_FROM_FIGMA.authData = action.payload.authData\r\n      UPDATE_FILE_DATA_FROM_FIGMA.figmaData = action.payload.pageData\r\n      //UPDATE_FILE_DATA_FROM_FIGMA.loading = false\r\n      UPDATE_FILE_DATA_FROM_FIGMA.nodeTree = null\r\n    return UPDATE_FILE_DATA_FROM_FIGMA;\r\n\r\n\r\n    default: throw new Error('Unexpected action');\r\n  }\r\n}\r\n\r\nexport default PyroReducer\r\nexport { initialPyroState }\r\n","export default __webpack_public_path__ + \"static/media/pyro_white.1a68b823.svg\";","import { useState,useEffect } from 'react'\r\nimport firebase from '../Utils/firebase'\r\n\r\nconst useAuth = ()=>{\r\n  const [user,setUser] = useState(null)\r\n\r\n  const listenToAuthState = ()=>\r\n    firebase.auth()\r\n      .onAuthStateChanged(user=>setUser(user))\r\n\r\n  useEffect(listenToAuthState,[])\r\n\r\n  return user\r\n}\r\n\r\nexport default useAuth\r\n","import React from 'react'\r\nimport './Loading.css'\r\n\r\nconst Loading = ()=>(\r\n  <main className=\"Loading\">\r\n    Loading...\r\n  </main>\r\n)\r\nexport default Loading\r\n","import firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\n\r\nconst SignIn = ()=>{\r\n  const auth = firebase.auth()\r\n\r\n  const signInWithGoogle=()=>{\r\n    const provider = new firebase.auth.GoogleAuthProvider()\r\n    auth.signInWithPopup(provider)\r\n  }\r\n  return (\r\n    <main className=\"SignIn\">\r\n      <button className=\"btn full\" onClick={signInWithGoogle}>Sign in</button>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default SignIn\r\n","import { useState,useEffect } from 'react'\r\nimport Loading from '../Loading'\r\nimport SignIn from '../SignIn'\r\nimport './Login.css'\r\n\r\nconst Login = ()=>{\r\n  const [showUp,setShowUp] = useState(false)\r\n  useEffect(()=>{\r\n    const unSub = setTimeout(()=>setShowUp(true),500)\r\n    return ()=> clearTimeout(unSub)\r\n  },[])\r\n  if(!showUp) return <Loading/>\r\n  return (\r\n    <main className=\"Login\">\r\n      <section>\r\n        <h1>Welcome 😊</h1>\r\n        <h2>Please sign in <br/>so we can let you in!</h2>\r\n        <p>Let me check if you  have access. <br/>You only have to do this once.</p>\r\n        <SignIn/>\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\nexport default Login\r\n","import firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\n\r\nconst SignOut = ({css})=>{\r\n  const auth = firebase.auth()\r\n  return (\r\n    <main className=\"SignOut\">\r\n      <button className={`btn ${css}`} onClick={()=>auth.signOut()} >Sign out</button>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default SignOut\r\n","import { useContext,useState,useEffect } from 'react'\r\nimport Loading from '../Loading'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\n\r\nimport SignOut from '../SignOut'\r\nimport './UserNotAllowed.css'\r\n\r\nconst UserNotAllowed = ()=>{\r\n  const [showUp,setShowUp] = useState(false)\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { userData } = useContext(PyroStateContext)\r\n  const sendRequest= ()=>{\r\n    console.log('sendRequest');\r\n  }\r\n  const handleRequest = ()=>{\r\n    sendRequest()\r\n    dispatch({type:'SHOW_REQUEST'})\r\n  }\r\n  useEffect(()=>{\r\n    const unSub = setTimeout(()=>setShowUp(true),500)\r\n    return ()=> clearTimeout(unSub)\r\n  },[])\r\n  if(!showUp) return <Loading/>\r\n  if(!userData)return null\r\n  const { displayName,email } = userData\r\n  return (\r\n    <main className=\"UserNotAllowed\">\r\n      <section>\r\n        <h1>Sorry,<br/>you're not on <br/>the list 😞</h1>\r\n        <p>You are logged in as <strong>{displayName}</strong></p>\r\n        <p>With the email <strong>{email}</strong></p>\r\n        <div className=\"btnCtn\">\r\n          <SignOut css=\"ghost\"/>\r\n          <button onClick={handleRequest} className=\"btn full\">Request access</button>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\nexport default UserNotAllowed\r\n","import React,{ useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport './User.css'\r\n\r\nconst User = ()=>{\r\n  const { userData } = useContext(PyroStateContext)\r\n  const { displayName,email,photoURL} = userData\r\n\r\n  return (\r\n    <div className=\"User\">\r\n      {photoURL&&<img src={photoURL} width=\"30\" alt={displayName}/>}\r\n      <span>{displayName}</span>\r\n    </div>\r\n  )\r\n}\r\nexport default User\r\n","import { useEffect,useContext } from 'react'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport './Pile.css'\r\n\r\nconst Pile = ({msg})=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  useEffect(()=>{\r\n    setTimeout(()=>dispatch({type:'HIDE_REQUEST'}),3000)\r\n  },[])\r\n  return (\r\n    <main className=\"Pile\">\r\n      <article>{msg}</article>\r\n    </main>\r\n  )\r\n}\r\nexport default Pile\r\n","const floatToRGB = channel =>{\r\n  if (channel!== 0 && channel!== 1) return channel*255\r\n  else if(channel === 1) return 255\r\n  else return channel\r\n}\r\nconst RenderedColor = color => {\r\n  if(color){\r\n    const {r,g,b,a} = color\r\n    const alpha = a?','+a+')':')'\r\n    return 'rgb('+floatToRGB(r)+','+floatToRGB(g)+','+floatToRGB(b)+alpha\r\n  } else return 'rgba(255,255,255,0)'\r\n}\r\nexport default RenderedColor\r\n","import React,{ useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport './InputDimensions.css'\r\n\r\nconst InputDimensions = ()=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { protoWidth,protoHeight,minWidth,minHeight,smoov } = useContext(PyroStateContext)\r\n  const setInputDimensions = (e,isWidth) =>{\r\n    if(!isNaN(Number(e.target.value)))dispatch({type:isWidth?'SET_WIDTH':'SET_HEIGHT',payload:Number(e.target.value)})\r\n  }\r\n  const checkMax = (e,isWidth) =>{\r\n    if(isWidth){\r\n      if(Number(e.target.value)>window.innerWidth){\r\n        dispatch({type:'SET_WIDTH',payload:window.innerWidth})\r\n      }\r\n      if(Number(e.target.value)<minWidth){\r\n        dispatch({type:'SET_WIDTH',payload:minWidth})\r\n      }\r\n    } else {\r\n      if(Number(e.target.value)>window.innerHeight){\r\n        dispatch({type:'SET_HEIGHT',payload:window.innerHeight - 35})\r\n      }\r\n      if(Number(e.target.value)<minHeight){\r\n        dispatch({type:isWidth?'SET_WIDTH':'SET_HEIGHT',payload:minHeight})\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"InputDimensions\">\r\n      <span>w</span>\r\n      <input\r\n        disabled={smoov}\r\n        onFocus={e=>e.target.select()}\r\n        onChange={e=>setInputDimensions(e,true)}\r\n        onBlur={e=>checkMax(e,true)}\r\n        value={Math.round(protoWidth)}\r\n        type=\"text\"/>\r\n      <span>h</span>\r\n      <input\r\n        disabled={smoov}\r\n        onFocus={e=>e.target.select()}\r\n        onChange={e=>setInputDimensions(e,false)}\r\n        onBlur={e=>checkMax(e,false)}\r\n        value={Math.round(protoHeight)}\r\n        type=\"text\"/>\r\n  </div>\r\n  )\r\n}\r\nexport default InputDimensions\r\n","export default __webpack_public_path__ + \"static/media/mobile.bcb52078.svg\";","export default __webpack_public_path__ + \"static/media/tablet.cfcfcd73.svg\";","export default __webpack_public_path__ + \"static/media/desktop.9125ff19.svg\";","import React,{ useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport mobile from '../../assets/images/mobile.svg'\r\nimport tablet from '../../assets/images/tablet.svg'\r\nimport desktop from '../../assets/images/desktop.svg'\r\nimport './Dimensions.css'\r\n\r\nconst Dimensions = ()=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { protoWidth,protoHeight,smoov,tabletWidth,tabletHeight } = useContext(PyroStateContext)\r\n  const setDimensions = dimensions =>{\r\n    let size = \"SET_MOBILE\"\r\n    switch (dimensions) {\r\n      case \"mobile\":size=\"SET_MOBILE\";break;\r\n      case \"desktop\":size=\"SET_DESKTOP\";break;\r\n      case \"tablet\":size=\"SET_TABLET\";break;\r\n      default:size=\"SET_MOBILE\";\r\n    }\r\n    dispatch({type:size})\r\n    setTimeout(()=>dispatch({type:'REMOVE_SMOOV'}),1000)\r\n  }\r\n  return (\r\n    <div className=\"Dimensions\">\r\n      <button\r\n        disabled={smoov}\r\n        onClick={()=>setDimensions(\"mobile\")}\r\n        className={protoWidth <= 450 ?'active':null}>\r\n        <img src={mobile} alt=\"mobile\"/>\r\n      </button>\r\n      <button\r\n        disabled={smoov}\r\n        onClick={()=>setDimensions(\"desktop\")}\r\n        className={protoWidth > 1024 ?'active':null}>\r\n        <img src={desktop} alt=\"desktop\"/>\r\n      </button>\r\n      <button\r\n        disabled={smoov}\r\n        onClick={()=>setDimensions(\"tablet\")}\r\n        className={protoWidth === tabletWidth&&protoHeight === tabletHeight ?'active':null}>\r\n        <img src={tablet} alt=\"mobile\"/>\r\n      </button>\r\n  </div>\r\n  )\r\n}\r\nexport default Dimensions\r\n","import React,{ useContext,useState } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport InputDimensions from '../InputDimensions'\r\nimport User from '../User'\r\nimport SignOut from '../SignOut'\r\nimport Dimensions from '../Dimensions'\r\nimport pyro from '../../assets/images/pyro_white.svg'\r\nimport './ProtoActions.css'\r\n\r\nconst ProtoActions = ()=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { userData,loading,figmaData,token,currentPageIDX,figmaFile,currentFrameID } = useContext(PyroStateContext)\r\n  const [ pagesOpen,setPagesOpen ] = useState(false)\r\n  const handlePageMenuClick = e =>{\r\n    dispatch({type:'SET_CURRENT_PAGE_IDX',payload:Number(e.target.getAttribute('idx'))})\r\n    setPagesOpen(false)\r\n  }\r\n\r\n  return (\r\n    <nav className=\"ProtoActions\">\r\n      <section>\r\n        <img src={pyro} height=\"27\" alt=\"pyro\"/>\r\n      </section>\r\n      {figmaData&&currentFrameID?\r\n        (<section className=\"fileInfo\">\r\n          <h1>{figmaData.name} - {figmaData.children[currentPageIDX].name}</h1>\r\n        </section>):\r\n        <h1 className=\"faded\">Proto name - Page name</h1>\r\n        }\r\n      <section className=\"actions\">\r\n        <button className=\"btn full\"><span>Share</span></button>\r\n        <Dimensions/>\r\n        <InputDimensions/>\r\n        {userData&&<User/>}\r\n        <SignOut css=\"full\"/>\r\n    </section>\r\n  </nav>\r\n  )\r\n}\r\nexport default ProtoActions\r\n","import React from 'react'\r\nimport './Empty.css'\r\n\r\nconst Empty = ()=>(\r\n  <section className=\"Empty\">\r\n    <p>\r\n      <span>Nothing to see here</span>\r\n      <span>😲</span>\r\n    </p>\r\n  </section>\r\n)\r\nexport default Empty\r\n","const ReturnVisibility = (pluginState,condition) =>{\r\n  const isC2 = String(condition.condition2)==='true'||String(condition.condition2)==='false'?String(condition.condition2):String(pluginState.pluginVariables[condition.condition2]).toLowerCase()\r\n  const nbC1 = Number(pluginState.pluginVariables[condition.condition1])\r\n  const nbC2 = isC2 === 'mt'?0:Number(isC2)\r\n  const c1 = String(pluginState.pluginVariables[condition.condition1]).toLowerCase()\r\n  let thisString = isC2 === 'mt'?'':isC2\r\n  switch (condition.operator) {\r\n    case 'isEqualTo':\r\n      if(c1 === isC2) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    case 'different':\r\n      if(c1 !== thisString) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    case 'contains':\r\n      const idxC2 = pluginState.pluginVariables[condition.condition1].toLowerCase().indexOf(thisString)\r\n      if(idxC2!== -1) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    case 'isGreaterThan':\r\n      if(isNaN(nbC1)||isNaN(nbC2))return false\r\n      if(nbC1 > nbC2) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    case 'isInferiorTo':\r\n      if(isNaN(nbC1)||isNaN(nbC2))return false\r\n      if(nbC1 < nbC2) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    case 'isGreaterThanOrEqualTo':\r\n      if(isNaN(nbC1)||isNaN(nbC2))return false\r\n      if(nbC1 >= nbC2) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    case 'isInferiorOrEqualTo':\r\n      if(isNaN(nbC1)||isNaN(nbC2))return false\r\n      if(nbC1 <= nbC2) return condition.show\r\n      else return !condition.show\r\n    break;\r\n    default: return 'nothing'\r\n  }\r\n\r\n}\r\nexport default ReturnVisibility\r\n","import React,{ useRef,useEffect,useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport './Gradients.css'\r\n\r\nconst Gradients = ({bg,gradType})=>{\r\n  const { protoWidth,protoHeight,figmaData } = useContext(PyroStateContext)\r\n  const canvasRef = useRef(null)\r\n  const { opacity,blendMode,gradientStops,gradientTransform } = bg\r\n\r\n  const makeGradients =()=>{\r\n    const startGradient = gradientTransform.start\r\n    const endGradient = gradientTransform.end\r\n    const c = canvasRef.current.getContext('2d')\r\n    c.clearRect(0, 0, Math.round(protoWidth), protoHeight)\r\n\r\n    const x0 = startGradient.x*Math.round(protoWidth)\r\n    const y0 = startGradient.y*Math.round(protoHeight)\r\n    const x1 = endGradient.x*Math.round(protoWidth)\r\n    const y1 = endGradient.y*Math.round(protoHeight)\r\n    const gradientWith = Math.sqrt(((x0-y0)*(x0-y0))+((x1-y1)*(x1-y1)))\r\n    let grad\r\n    switch (gradType) {\r\n      case 'linear':grad = c.createLinearGradient(x0,y0,x1,y1);break;\r\n      case 'radial':grad = c.createRadialGradient(x0,y0,0,x0,y0,gradientWith);break;\r\n      default:grad = c.createLinearGradient(x0,y0,x1,y1);break;\r\n    }\r\n\r\n    gradientStops.forEach((stop,idx) => {\r\n      const { position,color } = stop\r\n      grad.addColorStop(position,RenderedColor(color))\r\n    })\r\n    c.fillStyle = grad\r\n    c.fillRect(0,0,Math.round(protoWidth),Math.round(protoHeight))\r\n  }\r\n\r\n  const bgBlend = ()=> {\r\n    return {\r\n      opacity: opacity,\r\n      mixBlendMode: blendMode.toLowerCase().split('_').join('-')\r\n    }\r\n  }\r\n\r\n\r\n\r\n  useEffect(makeGradients,[figmaData,protoHeight,protoWidth])\r\n  return (\r\n    <div style={bgBlend()} className=\"Gradients\">\r\n      <canvas\r\n        width={protoWidth}\r\n        height={protoHeight}\r\n        ref={canvasRef}/>\r\n    </div>\r\n  )\r\n}\r\nexport default Gradients\r\n","import React from 'react'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport './SolidBG.css'\r\n\r\nconst SolidBG = ({bg})=>{\r\n  const sldBg = ()=>{\r\n    return {\r\n      background:RenderedColor(bg.color),\r\n      opacity: bg.opacity,\r\n      mixBlendMode: bg.hasOwnProperty('blendMode')?bg.blendMode.toLowerCase().split('_').join('-'):'normal'\r\n    }\r\n  }\r\n  return <div className=\"SolidBG\" style={sldBg()}/>\r\n}\r\nexport default SolidBG\r\n","import { useState,useEffect,useContext } from 'react'\r\nimport PyroStateContext from '../context/PyroStateContext'\r\nimport { firestore } from '../Utils/firebase'\r\n\r\nconst useAssets = ()=>{\r\n  const { figmaFile } = useContext(PyroStateContext)\r\n  const [assets,setAssets] = useState(null)\r\n\r\n  useEffect(()=>{\r\n    const unSub = firestore\r\n    .collection('figma-files')\r\n    .doc(figmaFile)\r\n    .collection('fileImages')\r\n    .onSnapshot(snap=>{\r\n      const dbAssets = snap.docs.reduce((acc,doc)=>{\r\n        acc[doc.id] = {...doc.data()}\r\n        return acc\r\n      },{})\r\n      setAssets(dbAssets)\r\n    })\r\n\r\n    return ()=> unSub()\r\n  },[])\r\n\r\n\r\n  return assets\r\n}\r\n\r\nexport default useAssets\r\n","import { useEffect,useState } from 'react'\r\nimport useAssets from '../../hooks/useAssets'\r\nimport './ImageBG.css'\r\n\r\nconst ImageBG = ({bg,constraints})=>{\r\n  const [srcUrl,setSrcUrl] = useState(null)\r\n  const storageImages = useAssets()\r\n\r\n\r\n\r\n\r\n  const bgBlend = ()=> {\r\n    return {\r\n      width:\"100%\",\r\n      opacity: bg.opacity,\r\n      mixBlendMode: bg.blendMode.toLowerCase().split('_').join('-')\r\n    }\r\n  }\r\n\r\n  const getImageUrl = ()=>{\r\n    if(storageImages&&storageImages.hasOwnProperty(bg.imageHash)){\r\n      setSrcUrl(storageImages[bg.imageHash].downloadURL)\r\n    }\r\n  }\r\n\r\n  useEffect(getImageUrl,[storageImages&&Object.keys(storageImages).length])\r\n\r\n\r\n  return <img style={bgBlend()} src={srcUrl} alt={bg.name}/>\r\n}\r\nexport default ImageBG\r\n","import React from 'react'\r\nimport Gradients from '../Gradients'\r\nimport SolidBG from '../SolidBG'\r\nimport ImageBG from '../ImageBG'\r\nimport './Background.css'\r\n\r\nconst Background = ({ element })=>{\r\n\r\n  const makeBackground = (bg,idx) => {\r\n    const key = element.id+idx\r\n    if (!bg.hasOwnProperty(\"visible\")||bg.visible) {\r\n      switch (bg.type) {\r\n\r\n        case \"GRADIENT_LINEAR\":\r\n          return (\r\n              <Gradients\r\n                gradType=\"linear\"\r\n                key={key}\r\n                bg={bg}/>\r\n            );break;\r\n\r\n        case \"GRADIENT_RADIAL\":\r\n        case \"GRADIENT_DIAMOND\":\r\n        case \"GRADIENT_ANGULAR\":\r\n          return (\r\n              <Gradients\r\n                gradType=\"radial\"\r\n                key={key}\r\n                bg={bg}/>\r\n            );break;\r\n\r\n        case \"IMAGE\":return <ImageBG constraints={element.constraints} bg={bg} key={key}/>;break;\r\n\r\n        default: return <SolidBG bg={bg} key={key}/>\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  if(!element.hasOwnProperty(\"background\")&&!element.hasOwnProperty(\"fills\"))return null\r\n  return (\r\n    <section className=\"Background\">\r\n      {(element.hasOwnProperty(\"background\")&&element.background&&element.background.length>0)&&element.background.map((bg,idx)=>makeBackground(bg,idx))}\r\n      {(element.hasOwnProperty(\"fills\")&&element.fills.length>0)&&element.fills.map((bg,idx)=>makeBackground(bg,idx))}\r\n    </section>\r\n  )\r\n}\r\nexport default Background\r\n","import React,{ useRef,useEffect,useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport './StrokeGradients.css'\r\n\r\nconst StrokeGradients = ({str,gradType,strokeWeight})=>{\r\n  const { protoWidth,protoHeight,figmaData } = useContext(PyroStateContext)\r\n  const canvasRef = useRef(null)\r\n  const { opacity,blendMode,gradientHandlePositions,gradientStops } = str\r\n\r\n  const makeStrokeGradients =()=>{\r\n    const startGradient = gradientHandlePositions[0]\r\n    const endGradient = gradientHandlePositions[1]\r\n    const c = canvasRef.current.getContext('2d')\r\n    c.clearRect(0, 0, Math.round(protoWidth), protoHeight)\r\n\r\n    const x0 = startGradient.x*Math.round(protoWidth)\r\n    const y0 = startGradient.y*Math.round(protoHeight)\r\n    const x1 = endGradient.x*Math.round(protoWidth)\r\n    const y1 = endGradient.y*Math.round(protoHeight)\r\n    const gradientWith = Math.sqrt(((x0-y0)*(x0-y0))+((x1-y1)*(x1-y1)))\r\n    let grad\r\n    switch (gradType) {\r\n      case 'linear':grad = c.createLinearGradient(x0,y0,x1,y1);break;\r\n      case 'radial':grad = c.createRadialGradient(x0,y0,0,x0,y0,gradientWith);break;\r\n      default:grad = c.createLinearGradient(x0,y0,x1,y1);break;\r\n    }\r\n\r\n    gradientStops.forEach((stop,idx) => {\r\n      const { position,color } = stop\r\n      grad.addColorStop(position,RenderedColor(color))\r\n    })\r\n    c.strokeStyle = grad\r\n    c.lineWidth = strokeWeight*2\r\n    c.strokeRect(0,0,Math.round(protoWidth),Math.round(protoHeight))\r\n  }\r\n\r\n  const strBlend = ()=> {\r\n    return {\r\n      opacity: opacity,\r\n      mixBlendMode: blendMode.toLowerCase().split('_').join('-')\r\n    }\r\n  }\r\n\r\n\r\n\r\n  useEffect(makeStrokeGradients,[figmaData,protoHeight,protoWidth])\r\n  return (\r\n    <div style={strBlend()} className=\"StrokeGradients\">\r\n      <canvas\r\n        width={protoWidth}\r\n        height={protoHeight}\r\n        ref={canvasRef}/>\r\n    </div>\r\n  )\r\n}\r\nexport default StrokeGradients\r\n","import React from 'react'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport './StrokeSolidBG.css'\r\n\r\nconst StrokeSolidBG = ({element,str,strokeWeight})=>{\r\n\r\n  const radius = ()=>{\r\n    if(element.hasOwnProperty(\"rectangleCornerRadius\")){\r\n      return element.rectangleCornerRadius.reduce((acc,itm,idx)=>{\r\n        acc = acc + itm+\"px \"\r\n        return acc\r\n      },\"\")\r\n    } else if(element.hasOwnProperty('cornerRadius')){\r\n      return element.cornerRadius + 'px'\r\n    } else return null\r\n  }\r\n\r\n  const sldBg = ()=>{\r\n    return {\r\n      borderRadius:radius(),\r\n      border: strokeWeight +\"px solid \" + RenderedColor(str.color),\r\n      opacity: str.opacity,\r\n      mixBlendMode: str.blendMode.toLowerCase().split('_').join('-')\r\n    }\r\n  }\r\n  return <div className=\"StrokeSolidBG\" style={sldBg()}/>\r\n}\r\nexport default StrokeSolidBG\r\n","import React from 'react'\r\nimport StrokeGradients from '../StrokeGradients'\r\nimport StrokeSolidBG from '../StrokeSolidBG'\r\nimport './Stroke.css'\r\n\r\nconst Stroke = ({ element })=>{\r\n  if(!element.hasOwnProperty('strokes')) return null\r\n  const makeStroke = (str,idx) => {\r\n    const key = element.id+idx\r\n    if (!str.hasOwnProperty(\"visible\")||str.visible) {\r\n      switch (str.type) {\r\n\r\n        case \"GRADIENT_LINEAR\":\r\n          return (\r\n              <StrokeGradients\r\n                strokeWeight={element.strokeWeight}\r\n                gradType=\"linear\"\r\n                key={key}\r\n                str={str}/>\r\n            );break;\r\n\r\n        case \"GRADIENT_RADIAL\":\r\n        case \"GRADIENT_DIAMOND\":\r\n        case \"GRADIENT_ANGULAR\":\r\n          return (\r\n              <StrokeGradients\r\n                strokeWeight={element.strokeWeight}\r\n                gradType=\"radial\"\r\n                key={key}\r\n                str={str}/>\r\n            );break;\r\n\r\n        default: return (\r\n          <StrokeSolidBG\r\n            strokeWeight={element.strokeWeight}\r\n            element={element}\r\n            str={str}\r\n            key={key}/>\r\n        )\r\n      }\r\n    }\r\n    return null\r\n  }\r\n  if(element.strokes.length ===0)return null\r\n  return (\r\n    <section className=\"Stroke\">\r\n      {element.hasOwnProperty(\"strokes\")&&element.strokes.map((str,idx)=>makeStroke(str,idx))}\r\n    </section>\r\n  )\r\n}\r\nexport default Stroke\r\n","import React,{ useContext,useEffect,useState } from 'react'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport Background from '../Background'\r\nimport Stroke from '../Stroke'\r\nimport './Vector.css'\r\n\r\nconst Vector = ({handleClick,node,style}) =>{\r\nconst { vectors,nodeTree } = useContext(PyroStateContext)\r\nconst { transitionNodeID,name,id,strokeWeight,parentNode } = node\r\nconst {vectorPaths,width,height} = vectors[id]\r\nconst [vectorStyle,setVectorStyle] = useState({...style})\r\nconst [isLoaded,setLoaded] = useState(false)\r\nconst [SVGStyle,setSVGStyle] = useState(null)\r\nconst [pathStyle,setPathStyle] = useState(null)\r\nconst setVector = ()=>{\r\n  let tempStyle = {...vectorStyle}\r\n  tempStyle.width = width\r\n  tempStyle.height = height\r\n  tempStyle[\"WebkitClipPath\"] = \"url(#\"+id+\")\"\r\n  setVectorStyle(tempStyle)\r\n  let tempSVG = {}\r\n  tempSVG.width = width\r\n  tempSVG.height = height\r\n  setSVGStyle(tempSVG)\r\n  let path = {}\r\n  path.stroke = width\r\n  path.strokeWidth = strokeWeight*2\r\n  if(node.strokes.length)path.stroke = RenderedColor(node.strokes[0].color)\r\n  setPathStyle(path)\r\n}\r\nconst setPos =()=>{\r\n  let tempStyle = {...vectorStyle}\r\n  if(nodeTree&&nodeTree.hasOwnProperty(parentNode)) {\r\n    setLoaded(true)\r\n    if(nodeTree[parentNode].type === 'INSTANCE'){\r\n      if(style.hasOwnProperty('top')) tempStyle.top = 0\r\n      if(style.hasOwnProperty('left')) tempStyle.left = 0\r\n      if(style.hasOwnProperty('right')) tempStyle.right = 0\r\n      if(style.hasOwnProperty('bottom')) tempStyle.bottom = 0\r\n      setVectorStyle(tempStyle)\r\n    }\r\n  }\r\n\r\n}\r\nuseEffect(setVector,[])\r\nuseEffect(setPos,[style])\r\nif(!isLoaded)return null\r\n  return (\r\n    <article\r\n      onClick={handleClick}\r\n      className={`Vector ${transitionNodeID?'clickable':null}`}\r\n      style={vectorStyle}>\r\n      <Background element={node}/>\r\n      <svg\r\n        style={SVGStyle}\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={width}\r\n        height={height}\r\n        viewBox={`0 0 ${width} ${height}`}>\r\n        <path strokeLinecap=\"round\" style={pathStyle} d={vectorPaths}/>\r\n      </svg>\r\n      <svg\r\n        style={SVGStyle}\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={width}\r\n        height={height}\r\n        viewBox={`0 0 ${width} ${height}`}>\r\n          <defs>\r\n            <clipPath id={id} >\r\n              <path d={vectorPaths}/>\r\n            </clipPath>\r\n         </defs>\r\n      </svg>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport default Vector\r\n","import React,{ useEffect,useState,useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport ReturnVisibility from '../../Utils/ReturnVisibility'\r\nimport Background from '../Background'\r\nimport './Text.css'\r\n\r\nconst Text = ({handleClick,node,style:posStyle}) =>{\r\nconst {\r\n  id,\r\n  transitionNodeID,\r\n  name,\r\n  characters,\r\n  textAlignHorizontal,\r\n  textAlignVertical,\r\n  textAutoResize,\r\n  textCase,\r\n  textDecoration,\r\n  fontName,\r\n  fontSize,\r\n  layoutAlign,\r\n  layoutGrow,\r\n  letterSpacing,\r\n  lineHeight,\r\n  listSpacing\r\n } = node\r\nconst [ textStyles,setTextStyles ] = useState(null)\r\nconst txtStyles = {\r\n  textAlign:textAlignHorizontal,\r\n  textAlignVertical,\r\n  textAutoResize,\r\n  textTransform:textCase,\r\n  textDecoration,\r\n  fontStyle:fontName.style,\r\n  fontFamily:fontName.family,\r\n  fontSize,\r\n  layoutAlign,\r\n  layoutGrow,\r\n  letterSpacing,\r\n  lineHeight,\r\n  listSpacing\r\n}\r\n\r\nconst { pluginState } = useContext(PyroStateContext)\r\n\r\nconst getStyles = ()=>{\r\n  switch (txtStyles.textTransform) {\r\n    case \"UPPER\":txtStyles.textTransform=\"uppercase\";break;\r\n    case \"LOWER\":txtStyles.textTransform=\"lowercase\";break;\r\n    case \"TITLE\":txtStyles.textTransform=\"capitalize\";break;\r\n    default: txtStyles.textTransform=\"normal\";\r\n  }\r\n  delete txtStyles[\"textCase\"]\r\n  delete txtStyles[\"lineHeightPercent\"]\r\n  delete txtStyles[\"lineHeightPx\"]\r\n  delete txtStyles[\"textAutoResize\"]\r\n  if(txtStyles.textAlignVertical !== \"TOP\"||txtStyles.textAlignHorizontal!==\"LEFT\"){\r\n    txtStyles.display = \"flex\"\r\n    let justif,align\r\n    switch (txtStyles.textAlignHorizontal) {\r\n      case \"CENTER\":\r\n        justif = \"center\"\r\n        txtStyles.margin = \"auto\";\r\n      break;\r\n      case \"RIGHT\":justif = \"flex-end\";break;\r\n    }\r\n    switch (txtStyles.textAlignVertical) {\r\n      case \"CENTER\":\r\n        align = \"center\";\r\n        txtStyles.margin = \"auto\";\r\n      break;\r\n      case \"BOTTOM\":align = \"flex-end\";break;\r\n    }\r\n    txtStyles.justifyContent = justif\r\n    txtStyles.alignItems = align\r\n  }\r\n\r\n  txtStyles.color = RenderedColor(node.fills[0].color)\r\n  setTextStyles(txtStyles)\r\n}\r\nconst sumStyles = ()=>{\r\n  const temp = {...posStyle,...textStyles}\r\n  temp.width += 10\r\n  if(pluginState.pluginConditions.hasOwnProperty(id)) {\r\n    const showMe = Object.keys(pluginState.pluginConditions[id]).every(condition => {\r\n      const isVisible = ReturnVisibility(pluginState,pluginState.pluginConditions[id][condition])\r\n      if(isVisible) return true\r\n      else return false\r\n    })\r\n    if(!showMe)temp.display = \"none\"\r\n    else temp.display = \"block\"\r\n  }\r\n  delete temp.height\r\n  return temp\r\n}\r\nuseEffect(getStyles,[])\r\nif(!pluginState)return null\r\nconst { pluginTexts,pluginVariables,pluginConditions } = pluginState\r\n  return (\r\n    <p\r\n      onClick={handleClick}\r\n      style={sumStyles()}\r\n      className={`Text ${node.name.split(' ')[0]} ${transitionNodeID?'clickable':null}`}>\r\n      {(pluginTexts&&pluginTexts.hasOwnProperty(id)&&pluginVariables[pluginTexts[id].varID]==='mt')?'':pluginTexts&&pluginTexts.hasOwnProperty(id)?String(pluginVariables[pluginTexts[id].varID]):characters}\r\n    </p>\r\n  )\r\n}\r\n\r\nexport default Text\r\n","import React,{ useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport Background from '../Background'\r\nimport './Field.css'\r\n\r\nconst Field = ({handleClick,node,style}) =>{\r\n  const { transitionNodeID,name,id } = node\r\n  const dispatch= useContext(PyroDispatchContext)\r\n  const { pluginState } = useContext(PyroStateContext)\r\n  const { pluginFields,pluginVariables } = pluginState\r\n  const { placeHolder,type,varID } = pluginFields[id]\r\n\r\n  return (\r\n    <input\r\n      className=\"Field\"\r\n      onFocus={e=>e.target.select()}\r\n      onChange={e=>dispatch({type:'UPDATE_FIELD_VALUE',payload:{val:e.target.value,variable:varID}})}\r\n      placeholder={placeHolder}\r\n      type={type}\r\n      value={pluginVariables[varID]==='mt'?'':pluginVariables[varID]}/>\r\n  )\r\n}\r\n\r\nexport default Field\r\n","import React from 'react'\r\nimport Background from '../Background'\r\nimport './Ellipse.css'\r\n\r\nconst Ellipse = ({handleClick,node,style}) =>(\r\n  <article\r\n    onClick={handleClick}\r\n    style={style}\r\n    className={`Ellipse ${node.name.split(' ').join('_')} ${node.transitionNodeID?'clickable':null}`}>\r\n    <Background element={node}/>\r\n  </article>\r\n)\r\n\r\nexport default Ellipse\r\n","import React,{ useContext,useEffect,useState } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport ReturnVisibility from '../../Utils/ReturnVisibility'\r\nimport Background from '../Background'\r\nimport Stroke from '../Stroke'\r\nimport Vector from '../Vector'\r\nimport Text from '../Text'\r\nimport Field from '../Field'\r\nimport Ellipse from '../Ellipse'\r\nimport './Element.css'\r\n\r\nconst Element = ({node,parent}) =>{\r\n\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { updateVis,pluginState,pluginStateChanges,rotations,vectors,figmaData,currentFrameID,nodeTree,protoWidth,protoHeight,currentPageIDX } = useContext(PyroStateContext)\r\n\r\n  const currentPage = figmaData.children[currentPageIDX]\r\n  const currentFrame = currentPage.children[currentFrameID]\r\n  const { transitionNodeID,opacity,effects,visible,constraints,type,id,name,absoluteBoundingBox,layoutMode,reactions } = node\r\n  const [ parentNode,setParentNode ] = useState(currentFrame)\r\n  const [ nodeStyle,setNodeStyle ] = useState(null)\r\n  const [ flexChild,setFlexChild ] = useState(false)\r\n  const [ clickable,makeClickable ] = useState(false)\r\n  const [ classNames,setClassNames ] = useState('')\r\n  const flexParent = node.hasOwnProperty(\"layoutMode\")\r\n  let tempStyle = {}\r\n\r\n  const setDimension =()=>{\r\n    const { width,height } = absoluteBoundingBox\r\n    if(constraints){\r\n      switch (constraints.horizontal) {\r\n        case \"CENTER\":case \"MIN\":case \"MAX\":\r\n          if(node.layoutAlign!=='STRETCH')tempStyle.width = width;\r\n        break;\r\n      }\r\n      switch (constraints.vertical) {\r\n        case \"CENTER\":case \"MIN\":case \"MAX\":\r\n          if(node.layoutGrow!== 1)tempStyle.height = height\r\n          else tempStyle.height = \"100%\";\r\n        break;\r\n      }\r\n    } else {\r\n      tempStyle.width = width\r\n      tempStyle.height = height\r\n    }\r\n\r\n    if(effects.length){\r\n      tempStyle.width = node.width\r\n      tempStyle.height = node.height\r\n    }\r\n\r\n  }\r\n\r\n  const setOpacity =()=> tempStyle.opacity = opacity.toFixed(2)\r\n  const setAxis= priority =>{\r\n    let axis = null\r\n    if (priority !== undefined) {\r\n      switch (priority) {\r\n        case \"SPACE_AROUND\":axis = \"space-around\";break;\r\n        case \"SPACE_BETWEEN\":axis = \"space-between\";break;\r\n        case \"FIXED\":axis = \"flex-start\";break;\r\n        case \"CENTER\":axis = \"center\";break;\r\n        case \"MAX\":axis = \"flex-end\";break;\r\n        default: axis = \"flex-start\"\r\n      }\r\n    }\r\n    return axis\r\n  }\r\n\r\n  const setFlex =()=>{\r\n    const { primaryAxisAlignItems,counterAxisAlignItems } = node\r\n    tempStyle.display = \"flex\"\r\n    if(layoutMode === 'VERTICAL')tempStyle.flexDirection = 'column'\r\n    tempStyle.justifyContent = setAxis(primaryAxisAlignItems)\r\n    tempStyle.alignItems = setAxis(counterAxisAlignItems)\r\n    const { paddingTop,paddingRight,paddingBottom,paddingLeft } = node\r\n    tempStyle.padding = paddingTop?paddingTop:0+\"px \"+paddingRight?paddingRight:0+\"px \"+paddingBottom?paddingBottom:0+\"px \"+paddingLeft?paddingLeft:0+\"px\"\r\n    tempStyle.boxSizing = \"border-box\"\r\n  }\r\n\r\n  const setEffects =()=>{\r\n    if(effects){\r\n      effects.forEach(fx => {\r\n        const {type:fxType,offset,radius,visible,color} = fx\r\n        if (visible) {\r\n          switch (fxType) {\r\n            case \"DROP_SHADOW\":\r\n              const { x,y } = offset\r\n              tempStyle.boxShadow = x +\"px \"+y+\"px \"+radius+\"px \"+ RenderedColor(color);\r\n            break;\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n  const setRotate =()=>tempStyle.transform = \"rotate(\"+Math.round(rotations[id].rotation)+\"deg)\"\r\n  //@TODO rotate shadow as well :)\r\n\r\n\r\n  const setPosition =()=>{\r\n\r\n    const { x,y,width,height } = absoluteBoundingBox\r\n    tempStyle.position = \"absolute\"\r\n    let top = y - currentFrame.absoluteBoundingBox.y\r\n    let left = x - currentFrame.absoluteBoundingBox.x\r\n\r\n    if(constraints){\r\n\r\n      switch (constraints.horizontal) {\r\n        case \"SCALE\":\r\n          tempStyle.left = left\r\n          //tempStyle.width = width/currentFrame.absoluteBoundingBox.width*100 + \"%\"\r\n        ;break;\r\n        case \"MIN\":case \"CENTER\":tempStyle.left = left ;break;\r\n        case \"MAX\": tempStyle.right = currentFrame.absoluteBoundingBox.width - (width + left);break;\r\n        case \"STRETCH\":\r\n          tempStyle.left = left\r\n          tempStyle.right = currentFrame.absoluteBoundingBox.width - (width + left)\r\n        ;break;\r\n      }\r\n      switch (constraints.vertical) {\r\n        case \"SCALE\":\r\n          tempStyle.top = top\r\n          //tempStyle.height = height/currentFrame.absoluteBoundingBox.height*100 + \"%\"\r\n          ;break;\r\n        case \"MIN\":case \"CENTER\":tempStyle.top = top;break;\r\n        case \"MAX\":tempStyle.bottom = currentFrame.absoluteBoundingBox.height - (height + top);break;\r\n        case \"STRETCH\":\r\n          tempStyle.top = top\r\n          tempStyle.bottom = currentFrame.absoluteBoundingBox.height - (height + top)\r\n        ;break;\r\n      }\r\n    } else {\r\n      tempStyle.top = top\r\n      tempStyle.left = left\r\n    }\r\n\r\n    if(nodeTree.hasOwnProperty(parent)&&nodeTree[parent].type !== 'FRAME'&&nodeTree[parent].type !== 'GROUP'){\r\n      const parentPos = nodeTree[parent].absoluteBoundingBox\r\n      if(constraints){\r\n        switch (constraints.horizontal) {\r\n          case \"MIN\":case \"CENTER\":case \"SCALE\":tempStyle.left = tempStyle.left - (parentPos.x - currentFrame.absoluteBoundingBox.x);break;\r\n          case \"MAX\":tempStyle.right = tempStyle.right - parentPos.width - (width + left);break;\r\n          case \"STRETCH\":\r\n            tempStyle.left = tempStyle.left - parentPos.x\r\n            tempStyle.right = tempStyle.right - parentPos.width - (width + left)\r\n          ;break;\r\n        }\r\n        switch (constraints.vertical) {\r\n          case \"MIN\":case \"CENTER\":case \"SCALE\":tempStyle.top = tempStyle.top - (parentPos.y - currentFrame.absoluteBoundingBox.y);break;\r\n          case \"MAX\":tempStyle.bottom = tempStyle.bottom - parentPos.height - (height + top);break;\r\n          case \"STRETCH\":\r\n            tempStyle.top = tempStyle.top - parentPos.y\r\n            tempStyle.bottom = tempStyle.bottom - parentPos.width - (width + left)\r\n          ;break;\r\n        }\r\n      }\r\n    }\r\n    if(nodeTree.hasOwnProperty(node.parentNode)&&nodeTree[node.parentNode].type === 'GROUP'){\r\n      tempStyle.top = 0\r\n      tempStyle.left = 0\r\n    }\r\n\r\n    if(nodeTree[node.parentNode]&&nodeTree[node.parentNode].type === 'INSTANCE') {\r\n      tempStyle.top = 0\r\n      tempStyle.left = 0\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n  const conditionBasedVisibility =()=>{\r\n    if(pluginState.pluginConditions.hasOwnProperty(id)) {\r\n      const showMe = Object.keys(pluginState.pluginConditions[id]).every(condition => {\r\n        const isVisible = ReturnVisibility(pluginState,pluginState.pluginConditions[id][condition])\r\n        if(isVisible) return true\r\n        else return false\r\n      })\r\n      if(!showMe)tempStyle.display = \"none\"\r\n    }\r\n  }\r\n\r\n\r\n  const setVisibility = ()=>{\r\n    if(visible!==undefined){\r\n      const setKey = {\r\n        id,attribute:\"visible\",value:visible\r\n      }\r\n      dispatch({type:'SET_ATTRIBUTE',payload:setKey})\r\n      if(!visible)tempStyle.display = \"none\"\r\n    }\r\n\r\n    if(pluginState)conditionBasedVisibility()\r\n    if(nodeStyle)setNodeStyle({...nodeStyle,...tempStyle})\r\n\r\n  }\r\n\r\n  const setChild =()=>{\r\n    const parentNodee = nodeTree[parent]\r\n    const itemSpacing = parentNodee.itemSpacing\r\n    const parentChildren = Object.keys(parentNodee.children)\r\n    const firstChild = parentNodee.order[0] === id\r\n    if(!firstChild&&parentChildren.length>1)tempStyle[parentNodee.layoutMode===\"VERTICAL\"?\"marginTop\":\"marginLeft\"] = itemSpacing\r\n    const flexDirectionIsHorizontal = parentNodee.layoutMode===\"HORIZONTAL\"\r\n      if(flexChild&&node.layoutAlign==='STRETCH')tempStyle[flexDirectionIsHorizontal?'height':'width'] = \"100%\"\r\n      if (flexChild) {\r\n        if(node.layoutGrow===1)tempStyle.flex = 1\r\n        else tempStyle[flexDirectionIsHorizontal?'width':'height'] = absoluteBoundingBox[flexDirectionIsHorizontal?'width':'height']\r\n      }\r\n\r\n  }\r\n\r\n  const setRadius=()=>{\r\n    if(node.hasOwnProperty(\"rectangleCornerRadius\")){\r\n      const radius = node.rectangleCornerRadius.reduce((acc,itm,idx)=>{\r\n        acc = acc + itm+\"px \"\r\n        return acc\r\n      },\"\")\r\n      tempStyle.borderRadius = radius\r\n      tempStyle.overflow = \"hidden\"\r\n    }\r\n      if(node.hasOwnProperty(\"cornerRadius\")){\r\n        tempStyle.borderRadius = node.cornerRadius\r\n        tempStyle.overflow = \"hidden\"\r\n    }\r\n  }\r\n\r\n  const centerStyle = isParent =>{\r\n    if(nodeStyle){\r\n      const centerParent = {...nodeStyle}\r\n      const childStyle = {...nodeStyle}\r\n      delete centerParent.width\r\n      delete centerParent.height\r\n      delete childStyle.height\r\n      delete centerParent.left\r\n      delete centerParent.right\r\n\r\n\r\n      const x = node.absoluteBoundingBox.x - currentFrame.absoluteBoundingBox.x\r\n      const isLeft = x <= (currentFrame.absoluteBoundingBox.width - childStyle.width) / 2\r\n\r\n      let calcChildWidth\r\n      if(isLeft){\r\n        calcChildWidth = currentFrame.absoluteBoundingBox.width - (x*2)\r\n      } else {\r\n        const xRight = (currentFrame.absoluteBoundingBox.width - (childStyle.width + childStyle.left))\r\n        calcChildWidth = currentFrame.absoluteBoundingBox.width - (xRight*2)\r\n        childStyle.display = \"flex\"\r\n        childStyle.justifyContent = \"flex-end\"\r\n      }\r\n\r\n      delete childStyle.position\r\n      delete childStyle.left\r\n      delete childStyle.top\r\n      delete childStyle.bottom\r\n      childStyle.width = calcChildWidth\r\n      if(!centerParent.width)delete centerParent.width\r\n      if(!childStyle.width)delete childStyle.width\r\n      return isParent==='parent'?centerParent:childStyle\r\n    }\r\n  }\r\n\r\n  const handleEvent = eventType =>{\r\n    if (pluginState) {\r\n      if (pluginState.pluginActions.hasOwnProperty(id)) {\r\n        Object.keys(pluginState.pluginActions[id]).forEach(action => {\r\n          if(eventType.indexOf(pluginState.pluginActions[id][action].eventType) !== -1 ){\r\n            dispatch({type:'UPDATE_PLUGIN_STATE',payload:{\r\n              pluginAction:pluginState.pluginActions[id][action],eventType\r\n            }})\r\n          }\r\n        })\r\n        makeClickable(true)\r\n      }\r\n      if(reactions.length)makeClickable(true)\r\n    }\r\n  }\r\n\r\n\r\n  const handleClick = ()=>{\r\n    handleEvent(['Click'])\r\n    if(reactions.length) dispatch({type:'SET_CURRENT_FRAME_ID',payload:reactions[0].action.destinationId})\r\n  }\r\n\r\n  const setNodeActions = ()=>{\r\n    if (pluginState) {\r\n\r\n      let setNode = {...node}\r\n      const { pluginActions,pluginConditions } = pluginState\r\n      if(pluginActions.hasOwnProperty(id))setNode.actions = pluginActions[id]\r\n      if(pluginConditions.hasOwnProperty(id))setNode.conditions = pluginConditions[id]\r\n      dispatch({type:'ADD_CHILD_ELEMENT',payload:setNode})\r\n    }\r\n  }\r\n\r\n\r\n\r\n  const updateVisibility =()=>{\r\n    if (nodeTree&&nodeTree.hasOwnProperty(id)&&nodeTree[id].hasOwnProperty('conditions')) {\r\n      const isVisible = Object\r\n      .keys(nodeTree[id].conditions)\r\n      .every(condition=>{\r\n        if (ReturnVisibility(pluginState,nodeTree[id].conditions[condition])) return true\r\n        else return false\r\n      })\r\n\r\n      let temp = {}\r\n      if(!isVisible)temp.display = 'none'\r\n      else temp.display = flexParent?'flex':'block'\r\n      if(nodeStyle)setNodeStyle({...nodeStyle,...temp})\r\n    }\r\n  }\r\n\r\n  const sortChildren = (a,b)=>{\r\n    const { order } = node\r\n    return order.indexOf(a) - order.indexOf(b)\r\n  }\r\n\r\n\r\n  useEffect(()=>{\r\n    let classes = `${type} ${name.split(' ').join('_')}  ${flexChild?'flexChild':''} ${flexParent?'flexParent':''} ${clickable||transitionNodeID?'clickable':''}`\r\n    if(flexParent) {\r\n      if(node.layoutMode === 'VERTICAL')classes += ' column'\r\n      else classes += ' row'\r\n    }\r\n\r\n    setClassNames(classes)\r\n  },[nodeTree,clickable])\r\n\r\n  useEffect(()=>{\r\n    if(nodeTree&&parent!==currentFrame.id)setParentNode(nodeTree[parent])\r\n  },[figmaData,nodeTree])\r\n\r\n  useEffect(setNodeActions,[nodeTree,currentFrameID,pluginStateChanges])\r\n  useEffect(()=>{\r\n    if(nodeTree&&Object.keys(nodeTree).length&&absoluteBoundingBox){\r\n      if(parent&&nodeTree.hasOwnProperty(parent)&&nodeTree[parent].layoutMode !== 'NONE')setFlexChild(nodeTree[parent].hasOwnProperty(\"layoutMode\"))\r\n      setRadius()\r\n      if(flexParent)setFlex()\r\n      if(opacity)setOpacity()\r\n      setDimension()\r\n      //if(rotations&&!rotations.hasOwnProperty('noRotations'))setRotate()\r\n      setEffects()\r\n\r\n      if(!flexChild)setPosition()\r\n      else setChild()\r\n      setVisibility()\r\n      setNodeStyle(tempStyle)\r\n    }\r\n  },[figmaData,nodeTree?Object.keys(nodeTree).length:nodeTree,flexChild])\r\n\r\n\r\n  useEffect(()=>{\r\n    if (nodeTree,pluginStateChanges) setVisibility()\r\n  },[nodeTree,pluginStateChanges])\r\n  useEffect(updateVisibility,[updateVis,nodeTree])\r\n\r\n  if(nodeStyle===null)return null\r\n  let renderThis\r\n\r\n  switch (type) {\r\n    case \"BOOLEAN_OPERATION\": {\r\n      const booleanChildren = Object.keys(node.children)\r\n      return (\r\n        <div className={`${type} ${name}`}>\r\n          {booleanChildren.map(childKey=>{\r\n            const pos = {...nodeStyle}\r\n            pos.top = 0\r\n            pos.left = 0\r\n            pos.right = 0\r\n            pos.bottom = 0\r\n            return (\r\n              <Vector\r\n                key={childKey}\r\n                handleClick={handleClick}\r\n                style={pos}\r\n                node={node.children[childKey]}/>\r\n            )\r\n          })}\r\n        </div>\r\n      )\r\n      break;\r\n    }\r\n    case \"VECTOR\":\r\n      if(nodeStyle&&vectors&&vectors.hasOwnProperty(id))renderThis = <Vector handleClick={handleClick} style={nodeStyle} node={node}/>\r\n      else return null;break;\r\n    case \"TEXT\":renderThis = <Text handleClick={handleClick} style={nodeStyle} node={node}/>;break;\r\n    case \"ELLIPSE\":renderThis = <Ellipse handleClick={handleClick} style={nodeStyle} node={node}/>;break;\r\n    default: renderThis = (\r\n      <article\r\n        style={nodeStyle}\r\n        onMouseEnter={()=>handleEvent(['MouseEnter','Hover'])}\r\n        onMouseLeave={()=>handleEvent(['MouseLeave','Hover'])}\r\n        onClick={handleClick}\r\n        className={'Element ' + type + ' ' + classNames}>\r\n        {(type!==\"TEXT\"&&type!==\"VECTOR\"&&type!==\"BOOLEAN_OPERATION\")&&<Background element={node}/>}\r\n        {(type!==\"TEXT\"&&type!==\"VECTOR\"&&type!==\"BOOLEAN_OPERATION\")&&<Stroke element={node}/>}\r\n        {pluginState&&(pluginState.hasOwnProperty('pluginFields')&&pluginState.pluginFields.hasOwnProperty(id))&&<Field handleClick={handleClick} style={nodeStyle} node={node}/>}\r\n        {node.children&&Object.keys(node.children)\r\n          .sort((a,b)=>sortChildren(a,b))\r\n          .map(key=>{\r\n          const child = node.children[key]\r\n          return (\r\n            <Element\r\n              parent={node.id}\r\n              key={key}\r\n              node={child}/>\r\n          )\r\n        })}\r\n      </article>\r\n    )\r\n\r\n  }\r\n\r\n  if(node.hasOwnProperty('constraints')&&node.constraints.horizontal === \"CENTER\") {\r\n\r\n    return (\r\n      <main\r\n        style={centerStyle(\"parent\")}\r\n        className=\"centerParent\">\r\n        <section\r\n          className=\"childStyle\"\r\n          style={centerStyle(\"child\")}>{renderThis}</section>\r\n      </main>\r\n    )\r\n  } else return renderThis\r\n\r\n\r\n\r\n}\r\n\r\nexport default Element\r\n","import React,{ useContext,useEffect } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport Empty from '../Empty'\r\nimport Element from '../Element'\r\nimport './RenderElements.css'\r\n\r\nconst RenderElements = ()=>{\r\n\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { figmaData,currentPageIDX,currentFrameID,nodeTree,currentPageID } = useContext(PyroStateContext)\r\n  const currentPage = figmaData.children[currentPageIDX]\r\n  const currentFrame = currentPage.children[currentFrameID]\r\n  const parentStyle = {\r\n    //minHeight:currentPage.children[currentFrameID].absoluteBoundingBox.height\r\n  }\r\n\r\n\r\n\r\n  useEffect(()=>{\r\n    if(currentFrameID)dispatch({type:'ADD_CHILD_ELEMENT',payload:currentFrame})\r\n  },[currentFrameID])\r\n  if(!currentFrame)return null\r\n  return (\r\n    <section style={parentStyle} className=\"RenderElements\">\r\n      {currentFrame.hasOwnProperty('children')?Object.keys(currentFrame.children).map(key=>(\r\n        <Element\r\n          key={currentFrame.children[key].id}\r\n          parent={currentFrame.id}\r\n          node={currentFrame.children[key]}/>\r\n      )):<Empty/>}\r\n    </section>\r\n  )\r\n}\r\nexport default RenderElements\r\n","import React,{ useContext } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport RenderElements from '../RenderElements'\r\nimport Background from '../Background'\r\nimport Stroke from '../Stroke'\r\nimport './Frame.css'\r\n\r\nconst Frame = ()=>{\r\n  const { figmaData,currentPageIDX,currentFrameID,protoHeight } = useContext(PyroStateContext)\r\n  const currentPage = figmaData.children[currentPageIDX]\r\n  const parentStyle = {\r\n    //overflowY: protoHeight < currentPage.children[currentFrameID].absoluteBoundingBox.height ? \"scroll\":null\r\n  }\r\n\r\n  return (\r\n    <section style={parentStyle} className=\"Frame\">\r\n      {(currentPage.children.hasOwnProperty(currentFrameID)&&currentPage.children[currentFrameID].hasOwnProperty('background')&&currentPage.children[currentFrameID].background.length>0)&&<Background element={currentPage.children[currentFrameID]}/>}\r\n      {(currentPage.children.hasOwnProperty(currentFrameID)&&currentPage.children[currentFrameID].hasOwnProperty('strokes')&&currentPage.children[currentFrameID].strokes.length>0)&&<Stroke element={currentPage.children[currentFrameID]}/>}\r\n      <RenderElements/>\r\n    </section>\r\n  )\r\n}\r\nexport default Frame\r\n","import React,{ useContext,useEffect } from 'react'\r\nimport { Resizable } from 'react-resizable'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport Frame from '../Frame'\r\nimport Empty from '../Empty'\r\nimport './Frames.css'\r\nimport './../../resize.css'\r\n\r\nconst Frames = ()=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { currentBreakpoint,breakPoints,nodeTree,figmaData,currentPageIDX,currentFrameID,isMobile,protoWidth,protoHeight,smoov,minWidth, minHeight } = useContext(PyroStateContext)\r\n  const currentPage = figmaData.children[currentPageIDX]\r\n  const handleResize = (e,{size}) =>{\r\n    const { width,height } = size\r\n    dispatch({type:'SET_DIRECTION',payload:0>=protoWidth-width})\r\n    dispatch({type:'SET_WIDTH',payload:width})\r\n    dispatch({type:'SET_HEIGHT',payload:height})\r\n  }\r\n\r\n\r\n  const checkRWD = ()=>{\r\n    const pages = figmaData.children[currentPageIDX]\r\n    if(pages.hasOwnProperty('children')){\r\n      Object.keys(pages.children).forEach((key,idx) => {\r\n        const frame = pages.children[key]\r\n        if (frame.name.indexOf('|')!==-1) {\r\n          frame[frame.name.split('|')[0].split(' ').join('**').toLowerCase()] = frame.absoluteBoundingBox.width\r\n          frame.index = idx\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  const updateBreakPoint = () =>{\r\n    if(breakPoints&&breakPoints.length){\r\n      const currentId = breakPoints.indexOf(breakPoints[currentBreakpoint])\r\n      if(currentFrameID!==currentId){\r\n        dispatch({type:'SET_CURRENT_FRAME_ID',payload:breakPoints[currentBreakpoint].id})\r\n        dispatch({type:'SET_CURRENT_FRAME_IDX',payload:currentId})\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(updateBreakPoint,[currentBreakpoint,breakPoints])\r\n\r\n  useEffect(checkRWD,[figmaData,currentPageIDX])\r\n  if(!figmaData.children[currentPageIDX].hasOwnProperty('children'))return <Empty/>\r\n  return (\r\n    <Resizable\r\n      maxConstraints={[window.innerWidth, window.innerHeight - 34]}\r\n      minConstraints={[minWidth, minHeight]}\r\n      onResize={handleResize}\r\n      width={protoWidth}\r\n      height={protoHeight}>\r\n      <main\r\n        style={{\"width\":protoWidth,\"height\":protoHeight}}\r\n        className={`Frames box ${isMobile?'mobile':'desktop'} ${smoov?'smoov':''}`}>\r\n        <p className=\"pageName\">{currentPage.name} &nbsp;>&nbsp; {currentFrameID&&currentPage.children[currentFrameID].name}</p>\r\n        <Frame/>\r\n      </main>\r\n    </Resizable>\r\n  )\r\n}\r\nexport default Frames\r\n","import { useContext,useEffect,useState } from 'react'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport RenderedColor from '../../Utils/RenderedColor'\r\nimport ProtoActions from '../ProtoActions'\r\nimport Frames from '../Frames'\r\nimport Loading from '../Loading'\r\n\r\nconst Prototype = ()=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { nodeTreeLength,direction,currentBreakpoint,breakPoints,rwd,currentFrameID,protoWidth,figmaData,figmaFile,loading,currentPageIDX,currentPageID,selection,nodeTree } = useContext(PyroStateContext)\r\n  const basicGrey = \"rgba(229.00000154972076,229.00000154972076,229.00000154972076,1)\"\r\n  const [ bg,setBG ] = useState(null)\r\n\r\n\r\n  const pageIdx = ()=>{\r\n    if (currentPageID&&figmaData) {\r\n      figmaData.children.every((page,i)=>{\r\n        if(page.id === currentPageID){\r\n          dispatch({type:'RESET_CURRENTPAGE',payload:i})\r\n          return false\r\n        } else return true\r\n      })\r\n    }\r\n  }\r\n\r\n  const getBreakPoints = ()=>{\r\n    const currWidth = Math.round(protoWidth)\r\n    if(nodeTree){\r\n      const frame = figmaData.children[currentPageIDX].children[currentFrameID]\r\n      const key = Object.keys(frame)\r\n      .filter(key=>key.indexOf(\"**\")!== -1)\r\n      const setPoints = Object.keys(figmaData.children[currentPageIDX].children)\r\n      .filter(childKey=>figmaData.children[currentPageIDX].children[childKey].hasOwnProperty(key[0]))\r\n      .map(childKey=>{\r\n        const currFrame = figmaData.children[currentPageIDX].children[childKey]\r\n        return {id:currFrame.id,name:currFrame.name,breakPoint:currFrame[key[0]]}\r\n      }).sort((a,b)=>a.breakPoint - b.breakPoint)\r\n\r\n\r\n      dispatch({type:'SET_BREAKPOINTS',payload:setPoints})\r\n    }\r\n  }\r\n\r\n  const handleResize =()=>{\r\n    if (breakPoints&&breakPoints.length) {\r\n      const w = Math.round(protoWidth)\r\n      if(direction){\r\n        if(currentBreakpoint+1<breakPoints.length&&w>breakPoints[currentBreakpoint+1].breakPoint){\r\n          dispatch({type:'SET_CURRENT_BPOINT',payload:currentBreakpoint+1})\r\n        }\r\n      } else if(w<breakPoints[currentBreakpoint].breakPoint&&currentBreakpoint-1>=0){\r\n        dispatch({type:'SET_CURRENT_BPOINT',payload:currentBreakpoint-1})\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  useEffect(pageIdx,[currentPageID,selection])\r\n  useEffect(handleResize,[protoWidth])\r\n  useEffect(getBreakPoints,[nodeTree])\r\n\r\n  useEffect(()=>{\r\n    if (figmaData&&figmaData.hasOwnProperty('document')) {\r\n      const background = RenderedColor(figmaData.children[currentPageIDX].backgroundColor)\r\n      if(background !== basicGrey)setBG({background})\r\n      else setBG(null)\r\n    }\r\n  },[figmaData,currentPageIDX])\r\n\r\n  return (\r\n    <main className=\"FigmaProto\">\r\n      <ProtoActions/>\r\n      <section style={bg} className=\"Prototype\">\r\n        {figmaData&&!loading?<Frames/>:<Loading/>}\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Prototype\r\n","import React from 'react'\r\nimport './NoPyro.css'\r\n\r\nconst NoPyro = ()=>(\r\n  <main className=\"NoPyro\">\r\n    NoPyro\r\n  </main>\r\n)\r\nexport default NoPyro\r\n","import { useContext,useEffect,useState } from 'react'\r\nimport { firestore } from './Utils/firebase'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\r\nimport PyroStateContext from './context/PyroStateContext'\r\nimport PyroDispatchContext from './context/PyroDispatchContext'\r\n\r\nimport Prototype from './components/Prototype'\r\nimport NoPyro from './components/NoPyro'\r\nimport './bolt_fonts.css'\r\nimport './assets/iconfont/harmonyicons.css'\r\nimport './App.css'\r\n\r\nconst FIGMA_CLIENT_ID = process.env.REACT_APP_FIGMA_CLIENT_ID\r\nconst FIGMA_SECRET = process.env.REACT_APP_FIGMA_SECRET\r\nconst URL_CB = process.env.REACT_APP_URL_CB\r\nconst FIGMA_SESSION = process.env.REACT_APP_FIGMA_SESSION\r\n\r\nconst App = ()=>{\r\n  const dispatch = useContext(PyroDispatchContext)\r\n  const { pristine,pluginState,noPyroProto,figmaData,figmaFile,loading } = useContext(PyroStateContext)\r\n  const db = firestore.collection('figma-files').doc(figmaFile)\r\n  const fileDB = db.collection(\"fileData\")\r\n  const pluginVariablesDB = fileDB.doc(\"pluginUIData\").collection(\"variables\")\r\n  const pluginActionsDB = fileDB.doc(\"pluginUIData\").collection(\"nodeActions\")\r\n  const pluginConditionsDB = fileDB.doc(\"pluginUIData\").collection(\"nodeConditions\")\r\n  const pluginFieldsDB = fileDB.doc(\"pluginUIData\").collection(\"nodeFields\")\r\n  const pluginTextsDB = fileDB.doc(\"pluginUIData\").collection(\"nodeTexts\")\r\n\r\n  const [pluginVariables] = useCollectionData(pluginVariablesDB,{idField:'id'})\r\n  const [pluginActions] = useCollectionData(pluginActionsDB,{idField:'id'})\r\n  const [pluginConditions] = useCollectionData(pluginConditionsDB,{idField:'id'})\r\n  const [pluginFields] = useCollectionData(pluginFieldsDB,{idField:'id'})\r\n  const [pluginTexts] = useCollectionData(pluginTextsDB,{idField:'id'})\r\n  \r\n\r\n  const waitForPyroState = ()=>{\r\n    if(pristine){\r\n      dispatch({type:'NOT_PRISTINE'})\r\n      return\r\n    }\r\n    if(!pluginConditions)dispatch({type:'RMV_LOADING'})\r\n\r\n  }\r\n\r\n  // const getSelection =()=>{\r\n  //   if(selection&&selection.length)dispatch({type:'SET_SELECTION',payload:selection[0]})\r\n  // }\r\n\r\n  const getPluginState = ()=>{\r\n    if(pluginVariables&&pluginActions&&pluginConditions&&pluginFields&&pluginTexts){\r\n\r\n      let pluginVariablesState = pluginVariables.reduce((acc,variable)=>{\r\n        acc[variable.id] = Object.entries(variable.var)[0][1]\r\n        return acc\r\n      },{})\r\n      let pluginFieldsState = pluginFields.reduce((acc,node)=>{\r\n        acc[node.id] = node\r\n        return acc\r\n      },{})\r\n      let pluginTextsState = pluginTexts.reduce((acc,node)=>{\r\n        acc[node.id] = node\r\n        return acc\r\n      },{})\r\n      let pluginActionsState = pluginActions.reduce((acc,node)=>{\r\n        pluginActionsDB.doc(node.id).collection('actions').get()\r\n        .then(snap=>{\r\n          const actions = {}\r\n          snap.forEach(doc => actions[doc.id] = doc.data())\r\n          acc[node.id] = actions\r\n        })\r\n        return acc\r\n      },{})\r\n\r\n      let pluginConditionsState = pluginConditions.reduce((acc,node)=>{\r\n        pluginConditionsDB.doc(node.id).collection('conditions').get()\r\n        .then(snap=>{\r\n          const conditions = {}\r\n          snap.forEach(doc => conditions[doc.id] = doc.data())\r\n          acc[node.id] = conditions\r\n          const nodeID = node.id\r\n          dispatch({type:'ADD_CONDITION',payload:{nodeID,conditions}})\r\n        })\r\n        return acc\r\n      },{})\r\n      const plugState = {pluginVariables:pluginVariablesState,pluginActions:pluginActionsState,pluginConditions:pluginConditionsState,pluginFields:pluginFieldsState,pluginTexts:pluginTextsState}\r\n      dispatch({type:'SET_PLUGIN_STATE',payload:plugState})\r\n    }\r\n  }\r\n\r\n  useEffect(waitForPyroState,[pristine])\r\n\r\n  useEffect(getPluginState,[pluginVariables,pluginActions,pluginConditions,pluginFields,pluginTexts])\r\n  if(noPyroProto) return <NoPyro/>\r\n  return <Prototype/>\r\n}\r\n\r\nexport default App\r\n","import { useReducer,useEffect } from 'react'\r\nimport { firestore } from '../../Utils/firebase'\r\nimport PyroStateContext from '../../context/PyroStateContext'\r\nimport PyroDispatchContext from '../../context/PyroDispatchContext'\r\nimport PyroReducer, { initialPyroState } from '../../reducers/PyroReducer'\r\nimport pyro from '../../assets/images/pyro_white.svg'\r\nimport useAuth from '../../hooks/useAuth'\r\nimport Login from '../Login'\r\nimport UserNotAllowed from '../UserNotAllowed'\r\nimport User from '../User'\r\nimport SignOut from '../SignOut'\r\nimport SignIn from '../SignIn'\r\nimport Pile from '../Pile'\r\nimport App from '../../App'\r\n\r\nconst InitFigma = ()=>{\r\n  const user = useAuth()\r\n  const fileKey = window.location.href.split('/figma/?key=')[1]\r\n  const [ state, dispatch ] = useReducer(PyroReducer, initialPyroState)\r\n  const { requestSent,userData,authData,userIsAllowed,figmaFile } = state\r\n  const db = firestore.collection('figma-files').doc(fileKey)\r\n\r\n  const updateUser = ()=>{\r\n    if(user){\r\n      const { photoURL,email,displayName } = user\r\n      dispatch({type:'SET_USER',payload:{ photoURL,email,displayName }})\r\n    } else dispatch({type:'SET_USER',payload:null})\r\n  }\r\n\r\n  const authorizeUser = ()=>{\r\n    let isAuthorised = false\r\n    if (user&&authData&&userData) {\r\n      const { currentOrg,myEmail,orgDomain,useOrg,users } = authData\r\n      const { displayName,email,photoURL } = userData\r\n      const imTheOwner = myEmail===email\r\n      const isMyGuest = users.length&&users.indexOf(email)!==-1\r\n      const isInMyOrg = useOrg && email.indexOf(currentOrg)!== -1\r\n      if (isInMyOrg) isAuthorised = true\r\n      if(isMyGuest) isAuthorised = true\r\n      if(imTheOwner)isAuthorised = true\r\n    }\r\n    return isAuthorised\r\n\r\n  }\r\n\r\n  const getVectors = () =>{\r\n    db.collection('fileData').doc('vectors').get()\r\n    .then(doc =>{\r\n      if (doc.exists) dispatch({type:'SET_VECTORS',payload:doc.data()})\r\n    }).catch(error => console.error(error))\r\n  }\r\n\r\n  const getData = () =>{\r\n    db.get()\r\n    .then(doc =>{\r\n      if (doc.exists) {\r\n        const {authData,pageData} = doc.data()\r\n        dispatch({type:'UPDATE_FILE_DATA_FROM_FIGMA',payload:{authData,pageData}})\r\n        dispatch({type:'SET_CURRENT_FRAME_ID',payload:pageData.children[0].prototypeStartNodeID})\r\n        dispatch({type:'NODE_LENGTH',payload:pageData.elementsCount})\r\n      } else dispatch({type:'NO_PROTO'})\r\n    }).catch(error => console.error(error))\r\n    updateUser()\r\n    authorizeUser()\r\n  }\r\n\r\n\r\n  useEffect(getVectors,[])\r\n  useEffect(getData,[])\r\n  useEffect(()=>{\r\n    updateUser()\r\n    if(userIsAllowed!==authorizeUser())dispatch({type:'AUTHORISE_USER',payload:authorizeUser})\r\n  },[authorizeUser(),user])\r\n  useEffect(()=>{\r\n    dispatch({type:'SET_FILEKEY',payload:fileKey})\r\n  },[])\r\n\r\n  if(!figmaFile)return <p>no file</p>\r\n  return (\r\n    <PyroDispatchContext.Provider value={dispatch}>\r\n      <PyroStateContext.Provider value={state}>\r\n        {user&&authorizeUser()?<App/>:(\r\n          <main className=\"SignIn\">\r\n            <section>\r\n              <img src={pyro} height=\"27\" alt=\"pyro\"/>\r\n              {userData&&<User/>}\r\n            </section>\r\n            {user&&!authorizeUser()?<UserNotAllowed/>:<Login/>}\r\n            {requestSent&&<Pile msg=\"Request sent succesfully\"/>}\r\n            <small>*Better design coming up!</small>\r\n          </main>\r\n        )}\r\n\r\n      </PyroStateContext.Provider>\r\n    </PyroDispatchContext.Provider>\r\n  )\r\n}\r\n\r\nexport default InitFigma\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport InitFigma from './components/InitFigma'\r\nReactDOM.render(<InitFigma />, document.getElementById('figma_pyro'))\r\n"],"sourceRoot":""}